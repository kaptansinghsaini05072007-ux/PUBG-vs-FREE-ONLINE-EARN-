<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Free Fire & PUBG - Play & Win Real Money</title>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&family=Fredoka+One&display=swap" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Custom Tailwind Config -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#FF6B6B',
                        secondary: '#4ECDC4',
                        accent: '#FFE66D',
                        dark: '#2C3E50',
                        light: '#F7F9FC'
                    },
                    fontFamily: {
                        heading: ['Fredoka One', 'cursive'],
                        body: ['Poppins', 'sans-serif']
                    }
                }
            }
        }
    </script>
    <style>
        * {
            box-sizing: border-box;
        }
        body {
            overflow-x: hidden;
        }
        .gradient-bg { 
            background: linear-gradient(135deg, #FF6B6B, #4ECDC4, #FFE66D);
            background-size: 400% 400%;
            animation: gradientShift 8s ease infinite;
        }
        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        .card-hover:hover { 
            transform: translateY(-5px); 
            box-shadow: 0 15px 25px rgba(0,0,0,0.1); 
        }
        .room-card { 
            transition: all 0.3s ease; 
            border: 2px solid transparent;
        }
        .room-card:hover {
            border-color: #4ECDC4;
        }
        .pulse { 
            animation: pulse 2s infinite; 
        }
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(255,107,107,0.7); }
            70% { box-shadow: 0 0 0 12px rgba(255,107,107,0); }
            100% { box-shadow: 0 0 0 0 rgba(255,107,107,0); }
        }
        .dice-roll {
            animation: roll 0.8s ease-in-out;
        }
        @keyframes roll {
            0% { transform: rotate(0deg) scale(1); }
            50% { transform: rotate(180deg) scale(1.1); }
            100% { transform: rotate(360deg) scale(1); }
        }
        .stats-counter {
            font-family: 'Fredoka One', cursive;
        }
        .floating {
            animation: floating 3s ease-in-out infinite;
        }
        @keyframes floating {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0px); }
        }
        .hero-image {
            filter: drop-shadow(0 10px 20px rgba(0,0,0,0.3));
            border: 3px solid white;
        }
        .live-transaction {
            animation: slideIn 0.5s ease-out;
        }
        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-20px); }
            to { opacity: 1; transform: translateX(0); }
        }
        .referral-glow {
            animation: glow 2s ease-in-out infinite alternate;
        }
        @keyframes glow {
            from { box-shadow: 0 0 10px #4ECDC4; }
            to { box-shadow: 0 0 20px #4ECDC4, 0 0 30px #4ECDC4; }
        }
        .game-banner {
            background: linear-gradient(45deg, #FF6B6B, #4ECDC4, #FFE66D);
            background-size: 400% 400%;
            animation: gradientShift 6s ease infinite;
        }
        .dark-mode {
            background-color: #1a202c;
            color: #e2e8f0;
        }
        .dark-mode .bg-white {
            background-color: #2d3748;
        }
        .dark-mode .text-dark {
            color: #e2e8f0;
        }
        .dark-mode .bg-light {
            background-color: #4a5568;
        }
        .match-running {
            background: linear-gradient(45deg, #48bb78, #68d391);
            color: white;
        }
        .match-upcoming {
            background: linear-gradient(45deg, #ed8936, #fbd38d);
            color: white;
        }
        .match-completed {
            background: linear-gradient(45deg, #a0aec0, #cbd5e0);
            color: white;
        }
        .vip-badge {
            background: linear-gradient(45deg, #ffd700, #ffed4a);
            color: #000;
            font-weight: bold;
        }
        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background: #ff0000;
            opacity: 0.8;
            animation: confetti-fall 5s linear infinite;
        }
        @keyframes confetti-fall {
            0% { transform: translateY(-100px) rotate(0deg); }
            100% { transform: translateY(100vh) rotate(360deg); }
        }
        .spin-wheel {
            animation: spin 2s ease-out;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .vip-tier {
            border: 3px solid transparent;
            background-clip: padding-box;
        }
        .vip-tier-1 {
            background: linear-gradient(45deg, #f0f0f0, #c0c0c0);
        }
        .vip-tier-2 {
            background: linear-gradient(45deg, #ffd700, #daa520);
        }
        .vip-tier-3 {
            background: linear-gradient(45deg, #e5e4e2, #b9f2ff);
        }
        .vip-active {
            border-color: #4ECDC4;
            box-shadow: 0 0 15px rgba(78, 205, 196, 0.5);
        }
        .blue-tick {
            color: #1DA1F2;
        }
    </style>
</head>
<body class="bg-light font-body text-dark min-h-screen overflow-x-hidden">

    <!-- Theme Toggle -->
    <div class="fixed top-20 right-4 z-50">
        <button id="themeToggle" class="bg-primary text-white p-3 rounded-full shadow-lg hover:bg-secondary transition">
            <i class="fas fa-moon"></i>
        </button>
    </div>

    <!-- Language Selector -->
    <div class="fixed top-32 right-4 z-50">
        <button id="languageToggle" class="bg-secondary text-white p-3 rounded-full shadow-lg hover:bg-primary transition">
            <i class="fas fa-globe"></i>
        </button>
    </div>

    <!-- Landing Page (Before Login) -->
    <div id="landingPage" class="min-h-screen flex flex-col">
        <!-- Navbar -->
        <nav class="bg-white shadow-lg sticky top-0 z-50 dark:bg-gray-800">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between items-center h-16">
                    <div class="flex items-center">
                        <i class="fas fa-gamepad text-primary text-3xl mr-2 floating"></i>
                        <h1 class="text-2xl font-heading text-primary dark:text-white">Free Fire & PUBG</h1>
                    </div>
                    <div class="flex space-x-3">
                        <button onclick="showLogin()" class="bg-primary text-white px-5 py-2 rounded-full hover:bg-secondary transition font-semibold text-sm">Login</button>
                        <button onclick="showSignup()" class="bg-secondary text-white px-5 py-2 rounded-full hover:bg-primary transition font-semibold text-sm">Sign Up</button>
                        <button onclick="showAdminLogin()" class="bg-accent text-dark px-5 py-2 rounded-full font-semibold hover:bg-secondary transition text-sm">Admin</button>
                    </div>
                </div>
            </div>
        </nav>

        <!-- Hero Section -->
        <section class="gradient-bg flex-1 flex items-center justify-center py-12 px-4">
            <div class="text-center text-white max-w-6xl w-full">
                <!-- Free Fire Images -->
                <div class="flex justify-center items-center mb-8 space-x-4">
                    <img src="https://images.unsplash.com/photo-1550745165-9bc0b252726f?w=150&h=150&fit=crop&crop=center" 
                         alt="Free Fire" class="w-24 h-24 md:w-32 md:h-32 rounded-xl hero-image floating">
                    <img src="https://images.unsplash.com/photo-1542751371-adc38448a05e?w=150&h=150&fit=crop&crop=center" 
                         alt="Free Fire Battle" class="w-24 h-24 md:w-32 md:h-32 rounded-xl hero-image floating" style="animation-delay: 0.5s;">
                    <img src="https://images.unsplash.com/photo-1534423861386-85a16f5d13fd?w=150&h=150&fit=crop&crop=center" 
                         alt="Free Fire Tournament" class="w-24 h-24 md:w-32 md:h-32 rounded-xl hero-image floating" style="animation-delay: 1s;">
                </div>

                <h1 class="text-4xl md:text-6xl font-heading mb-6">Play Free Fire & PUBG. Win Real Cash!</h1>
                <p class="text-lg md:text-xl mb-8 max-w-2xl mx-auto">Join India's fastest growing gaming platform. Instant withdrawals, 24/7 support.</p>
                
                <!-- Live Stats -->
                <div class="grid grid-cols-2 md:grid-cols-4 gap-3 mb-8 max-w-4xl mx-auto">
                    <div class="bg-white bg-opacity-20 backdrop-blur-sm p-3 rounded-2xl">
                        <i class="fas fa-users text-xl mb-1"></i>
                        <p class="text-xl font-bold stats-counter" id="liveUsers">58,423</p>
                        <p class="text-xs">Active Players</p>
                    </div>
                    <div class="bg-white bg-opacity-20 backdrop-blur-sm p-3 rounded-2xl">
                        <i class="fas fa-rupee-sign text-xl mb-1"></i>
                        <p class="text-xl font-bold stats-counter" id="totalDeposit">‚Çπ1,82,456</p>
                        <p class="text-xs">Total Deposit</p>
                    </div>
                    <div class="bg-white bg-opacity-20 backdrop-blur-sm p-3 rounded-2xl">
                        <i class="fas fa-money-bill-wave text-xl mb-1"></i>
                        <p class="text-xl font-bold stats-counter" id="totalWithdrawal">‚Çπ1,45,892</p>
                        <p class="text-xs">Total Withdrawal</p>
                    </div>
                    <div class="bg-white bg-opacity-20 backdrop-blur-sm p-3 rounded-2xl">
                        <i class="fas fa-trophy text-xl mb-1"></i>
                        <p class="text-xl font-bold stats-counter" id="liveWinners">2,847</p>
                        <p class="text-xs">Today's Winners</p>
                    </div>
                </div>

                <!-- Live Transactions -->
                <div class="bg-white bg-opacity-10 backdrop-blur-sm rounded-2xl p-3 mb-6 max-w-2xl mx-auto">
                    <div class="flex items-center justify-center mb-2">
                        <i class="fas fa-bolt text-accent mr-2"></i>
                        <p class="font-bold text-sm">Live Transactions</p>
                    </div>
                    <div class="space-y-1 text-xs" id="liveTransactions">
                        <!-- Transactions will appear here -->
                    </div>
                </div>

                <button onclick="showSignup()" class="bg-white text-primary px-8 py-3 rounded-full text-lg font-bold hover:scale-105 transition transform pulse">
                    <i class="fas fa-play mr-2"></i>Play Now & Win ‚Çπ500!
                </button>

                <!-- Telegram Community Button -->
                <div class="mt-6">
                    <a href="https://t.me/+_W2RKTlpHI81MjJl" target="_blank" class="bg-blue-500 text-white px-6 py-3 rounded-full font-bold hover:bg-blue-600 transition inline-flex items-center">
                        <i class="fab fa-telegram mr-2 text-xl"></i>Join Our Telegram Community
                    </a>
                </div>

                <!-- Referral Banner -->
                <div class="mt-6 bg-white bg-opacity-20 backdrop-blur-sm rounded-2xl p-4 max-w-md mx-auto referral-glow">
                    <div class="flex items-center justify-center">
                        <i class="fas fa-gift text-accent text-xl mr-2"></i>
                        <p class="font-bold">üéØ Get 2% Commission on Every Direct Member's Deposit!</p>
                    </div>
                    <p class="text-sm mt-1">Invite friends & earn unlimited rewards!</p>
                </div>
            </div>
        </section>

        <!-- Features -->
        <section class="py-16 bg-white dark:bg-gray-800">
            <div class="max-w-7xl mx-auto px-4">
                <h2 class="text-4xl font-heading text-center mb-12 text-primary dark:text-white">Why Choose Us?</h2>
                <div class="grid md:grid-cols-3 gap-6">
                    <div class="text-center p-6 bg-light dark:bg-gray-700 rounded-2xl card-hover">
                        <i class="fas fa-bolt text-5xl text-secondary mb-4"></i>
                        <h3 class="text-2xl font-bold mb-2 dark:text-white">Instant Cashout</h3>
                        <p class="dark:text-gray-300">Withdraw winnings in 24 hours via UPI/Bank</p>
                    </div>
                    <div class="text-center p-6 bg-light dark:bg-gray-700 rounded-2xl card-hover">
                        <i class="fas fa-lock text-5xl text-primary mb-4"></i>
                        <h3 class="text-2xl font-bold mb-2 dark:text-white">100% Safe</h3>
                        <p class="dark:text-gray-300">Fully encrypted. RNG certified fair play</p>
                    </div>
                    <div class="text-center p-6 bg-light dark:bg-gray-700 rounded-2xl card-hover">
                        <i class="fas fa-trophy text-5xl text-accent mb-4"></i>
                        <h3 class="text-2xl font-bold mb-2 dark:text-white">Win 90%</h3>
                        <p class="dark:text-gray-300">Only 10% platform fee. Maximum earnings!</p>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Signup Modal -->
    <div id="signupModal" class="fixed inset-0 bg-black bg-opacity-70 hidden flex items-center justify-center z-50 p-4">
        <div class="bg-white dark:bg-gray-800 rounded-3xl p-8 w-full max-w-md transform scale-95 transition">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-3xl font-heading text-primary dark:text-white">Create Account</h2>
                <button onclick="closeModals()" class="text-2xl dark:text-white">√ó</button>
            </div>
            <form onsubmit="handleSignup(event)">
                <input type="text" id="signupName" placeholder="Full Name" class="w-full p-4 mb-4 border-2 border-secondary rounded-xl focus:border-primary outline-none dark:bg-gray-700 dark:text-white" required>
                <input type="email" id="signupEmail" placeholder="Email" class="w-full p-4 mb-4 border-2 border-secondary rounded-xl focus:border-primary outline-none dark:bg-gray-700 dark:text-white" required>
                <input type="tel" id="signupPhone" placeholder="Phone (10 digits)" class="w-full p-4 mb-4 border-2 border-secondary rounded-xl focus:border-primary outline-none dark:bg-gray-700 dark:text-white" pattern="[0-9]{10}" required>
                <input type="text" id="signupReferralCode" placeholder="Referral Code (Optional)" class="w-full p-4 mb-4 border-2 border-secondary rounded-xl focus:border-primary outline-none dark:bg-gray-700 dark:text-white">
                <input type="password" id="signupPass" placeholder="Password" class="w-full p-4 mb-6 border-2 border-secondary rounded-xl focus:border-primary outline-none dark:bg-gray-700 dark:text-white" required>
                <button type="submit" class="w-full bg-gradient-to-r from-primary to-secondary text-white py-4 rounded-xl font-bold text-lg hover:opacity-90 transition">
                    Sign Up Free
                </button>
            </form>
        </div>
    </div>

    <!-- Login Modal -->
    <div id="loginModal" class="fixed inset-0 bg-black bg-opacity-70 hidden flex items-center justify-center z-50 p-4">
        <div class="bg-white dark:bg-gray-800 rounded-3xl p-8 w-full max-w-md transform scale-95 transition">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-3xl font-heading text-primary dark:text-white">Welcome Back!</h2>
                <button onclick="closeModals()" class="text-2xl dark:text-white">√ó</button>
            </div>
            <form onsubmit="handleLogin(event)">
                <input type="email" id="loginEmail" placeholder="Email" class="w-full p-4 mb-4 border-2 border-secondary rounded-xl focus:border-primary outline-none dark:bg-gray-700 dark:text-white" required>
                <input type="password" id="loginPass" placeholder="Password" class="w-full p-4 mb-6 border-2 border-secondary rounded-xl focus:border-primary outline-none dark:bg-gray-700 dark:text-white" required>
                <button type="submit" class="w-full bg-gradient-to-r from-primary to-secondary text-white py-4 rounded-xl font-bold text-lg hover:opacity-90 transition">
                    Login Now
                </button>
            </form>
        </div>
    </div>

    <!-- Admin Login Modal -->
    <div id="adminLoginModal" class="fixed inset-0 bg-black bg-opacity-70 hidden flex items-center justify-center z-50 p-4">
        <div class="bg-white dark:bg-gray-800 rounded-3xl p-8 w-full max-w-md transform scale-95 transition">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-3xl font-heading text-primary dark:text-white">Admin Login</h2>
                <button onclick="closeAdminModal()" class="text-2xl dark:text-white">√ó</button>
            </div>
            <form onsubmit="handleAdminLogin(event)">
                <input type="email" id="adminEmail" placeholder="Admin Email" class="w-full p-4 mb-4 border-2 border-secondary rounded-xl focus:border-primary outline-none dark:bg-gray-700 dark:text-white" required>
                <input type="password" id="adminPass" placeholder="Password" class="w-full p-4 mb-6 border-2 border-secondary rounded-xl focus:border-primary outline-none dark:bg-gray-700 dark:text-white" required>
                <button type="submit" class="w-full bg-gradient-to-r from-primary to-secondary text-white py-4 rounded-xl font-bold text-lg hover:opacity-90 transition">
                    Admin Login
                </button>
            </form>
        </div>
    </div>

    <!-- Dashboard (After Login) -->
    <div id="dashboard" class="hidden min-h-screen bg-light dark:bg-gray-900">
        <!-- Dashboard Navbar -->
        <nav class="bg-white dark:bg-gray-800 shadow-lg sticky top-0 z-40">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between items-center h-16">
                    <div class="flex items-center">
                        <i class="fas fa-gamepad text-primary text-3xl mr-2"></i>
                        <h1 class="text-2xl font-heading text-primary dark:text-white">Free Fire & PUBG</h1>
                    </div>
                    <div class="flex items-center space-x-6">
                        <!-- Daily Login Bonus -->
                        <div class="hidden md:block">
                            <button onclick="claimDailyBonus()" class="bg-yellow-500 text-dark px-4 py-2 rounded-full font-bold hover:bg-yellow-600 transition">
                                <i class="fas fa-gift mr-1"></i> Daily Bonus
                            </button>
                        </div>
                        <div class="text-right">
                            <p class="font-bold dark:text-white" id="dashUsername">Player123</p>
                            <p class="text-xs text-gray-600 dark:text-gray-400" id="lastSeen">Last seen: just now</p>
                        </div>
                        <div class="relative">
                            <button onclick="toggleMenu()" class="text-3xl text-dark dark:text-white">
                                <i class="fas fa-ellipsis-v"></i>
                            </button>
                            <div id="menuDropdown" class="absolute right-0 mt-2 w-56 bg-white dark:bg-gray-800 rounded-2xl shadow-xl hidden">
                                <a href="#" onclick="showSection('profile')" class="block px-6 py-3 hover:bg-light dark:hover:bg-gray-700 rounded-t-2xl dark:text-white"><i class="fas fa-user mr-2"></i> Profile</a>
                                <a href="#" onclick="showSection('history')" class="block px-6 py-3 hover:bg-light dark:hover:bg-gray-700 dark:text-white"><i class="fas fa-history mr-2"></i> History</a>
                                <a href="#" onclick="showSection('deposit')" class="block px-6 py-3 hover:bg-light dark:hover:bg-gray-700 dark:text-white"><i class="fas fa-wallet mr-2"></i> Deposit</a>
                                <a href="#" onclick="showSection('withdraw')" class="block px-6 py-3 hover:bg-light dark:hover:bg-gray-700 dark:text-white"><i class="fas fa-money-bill-wave mr-2"></i> Withdraw</a>
                                <a href="#" onclick="showSection('referral')" class="block px-6 py-3 hover:bg-light dark:hover:bg-gray-700 dark:text-white"><i class="fas fa-user-plus mr-2"></i> Refer & Earn</a>
                                <a href="#" onclick="showSection('spinwheel')" class="block px-6 py-3 hover:bg-light dark:hover:bg-gray-700 dark:text-white"><i class="fas fa-sync-alt mr-2"></i> Spin Wheel</a>
                                <a href="#" onclick="showSection('leaderboard')" class="block px-6 py-3 hover:bg-light dark:hover:bg-gray-700 dark:text-white"><i class="fas fa-trophy mr-2"></i> Leaderboard</a>
                                <a href="https://wa.me/12264939021" target="_blank" class="block px-6 py-3 hover:bg-light dark:hover:bg-gray-700 dark:text-white"><i class="fas fa-headset mr-2"></i> Customer Support</a>
                                <a href="https://t.me/+_W2RKTlpHI81MjJl" target="_blank" class="block px-6 py-3 hover:bg-light dark:hover:bg-gray-700 dark:text-white"><i class="fab fa-telegram mr-2"></i> Telegram Community</a>
                                <a href="#" class="block px-6 py-3 hover:bg-light dark:hover:bg-gray-700 text-red-600 rounded-b-2xl" onclick="logout()"><i class="fas fa-sign-out-alt mr-2"></i> Logout</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </nav>

        <!-- Game Banners - Free Fire Theme -->
        <div class="max-w-7xl mx-auto px-4 py-6">
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
                <div class="game-banner rounded-2xl p-4 text-white text-center card-hover">
                    <img src="https://images.unsplash.com/photo-1550745165-9bc0b252726f?w=100&h=100&fit=crop&crop=center" 
                         alt="Free Fire" class="w-16 h-16 rounded-full mx-auto mb-2 border-2 border-white">
                    <p class="font-bold text-sm">Free Fire</p>
                    <p class="text-xs">Battle Royale</p>
                </div>
                <div class="game-banner rounded-2xl p-4 text-white text-center card-hover">
                    <img src="https://images.unsplash.com/photo-1542751371-adc38448a05e?w=100&h=100&fit=crop&crop=center" 
                         alt="Free Fire Battle" class="w-16 h-16 rounded-full mx-auto mb-2 border-2 border-white">
                    <p class="font-bold text-sm">Clash Squad</p>
                    <p class="text-xs">4v4 Matches</p>
                </div>
                <div class="game-banner rounded-2xl p-4 text-white text-center card-hover">
                    <img src="https://images.unsplash.com/photo-1534423861386-85a16f5d13fd?w=100&h=100&fit=crop&crop=center" 
                         alt="Free Fire Tournament" class="w-16 h-16 rounded-full mx-auto mb-2 border-2 border-white">
                    <p class="font-bold text-sm">Ranked Match</p>
                    <p class="text-xs">Pro Level</p>
                </div>
                <div class="game-banner rounded-2xl p-4 text-white text-center card-hover">
                    <img src="https://images.unsplash.com/photo-1552820728-8b83bb6b773f?w=100&h=100&fit=crop&crop=center" 
                         alt="PUBG" class="w-16 h-16 rounded-full mx-auto mb-2 border-2 border-white">
                    <p class="font-bold text-sm">PUBG Mobile</p>
                    <p class="text-xs">Classic Mode</p>
                </div>
            </div>
        </div>

        <!-- User Info Card -->
        <div class="max-w-7xl mx-auto px-4 py-8">
            <div class="bg-gradient-to-r from-primary to-secondary text-white p-6 rounded-3xl shadow-xl">
                <div class="flex justify-between items-center">
                    <div>
                        <p class="text-sm opacity-90">Welcome back,</p>
                        <p class="text-2xl font-bold" id="welcomeUser">Player123</p>
                        <p class="text-sm"> Joined: <span id="joinDate">15 Mar 2025</span></p>
                    </div>
                    <div class="text-right">
                        <p class="text-sm opacity-90">Wallet Balance</p>
                        <p class="text-4xl font-bold" id="walletBalance">‚Çπ0</p>
                        <button onclick="showSection('deposit')" class="mt-2 bg-white text-primary px-6 py-2 rounded-full text-sm font-bold hover:scale-105 transition">
                            Add Money
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- VIP Membership Section -->
        <div class="max-w-7xl mx-auto px-4 py-6">
            <div class="bg-gradient-to-r from-purple-500 to-pink-500 text-white p-6 rounded-3xl shadow-xl">
                <h2 class="text-2xl font-heading text-center mb-4">üéÆ VIP Membership</h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div class="vip-tier vip-tier-1 p-4 rounded-2xl text-center card-hover">
                        <h3 class="font-bold text-lg mb-2">VIP 1</h3>
                        <p class="text-sm">3% Extra Bonus on Deposits</p>
                        <p class="text-sm">Monthly: ‚Çπ199</p>
                        <p class="text-sm">Yearly: ‚Çπ2149</p>
                        <button onclick="upgradeVIP(1)" class="mt-2 bg-white text-purple-600 px-4 py-1 rounded-full text-sm font-bold">Upgrade</button>
                    </div>
                    <div class="vip-tier vip-tier-2 p-4 rounded-2xl text-center card-hover">
                        <h3 class="font-bold text-lg mb-2">VIP 2</h3>
                        <p class="text-sm">5% Extra Bonus on Deposits</p>
                        <p class="text-sm">Monthly: ‚Çπ499</p>
                        <p class="text-sm">Yearly: ‚Çπ5150</p>
                        <button onclick="upgradeVIP(2)" class="mt-2 bg-white text-purple-600 px-4 py-1 rounded-full text-sm font-bold">Upgrade</button>
                    </div>
                    <div class="vip-tier vip-tier-3 p-4 rounded-2xl text-center card-hover">
                        <h3 class="font-bold text-lg mb-2">VIP 3</h3>
                        <p class="text-sm">10% Extra Bonus on Deposits</p>
                        <p class="text-sm">Monthly: ‚Çπ900</p>
                        <p class="text-sm">Yearly: ‚Çπ11050</p>
                        <button onclick="upgradeVIP(3)" class="mt-2 bg-white text-purple-600 px-4 py-1 rounded-full text-sm font-bold">Upgrade</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Live Matches Section -->
        <div class="max-w-7xl mx-auto px-4 py-6">
            <h2 class="text-3xl font-heading text-center mb-6 text-primary dark:text-white">üî• Live Matches</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8">
                <div class="match-running p-4 rounded-2xl text-white">
                    <div class="flex justify-between items-center">
                        <span class="font-bold">Running</span>
                        <span class="text-sm">5 min left</span>
                    </div>
                    <p class="mt-2">‚Çπ100 Battle Royale</p>
                    <p class="text-sm">12/16 Players</p>
                </div>
                <div class="match-upcoming p-4 rounded-2xl text-white">
                    <div class="flex justify-between items-center">
                        <span class="font-bold">Upcoming</span>
                        <span class="text-sm">Starts in 10 min</span>
                    </div>
                    <p class="mt-2">‚Çπ50 Clash Squad</p>
                    <p class="text-sm">8/8 Players</p>
                </div>
                <div class="match-completed p-4 rounded-2xl text-white">
                    <div class="flex justify-between items-center">
                        <span class="font-bold">Completed</span>
                        <span class="text-sm">Winner: PlayerX</span>
                    </div>
                    <p class="mt-2">‚Çπ200 Tournament</p>
                    <p class="text-sm">Prize: ‚Çπ360</p>
                </div>
            </div>
        </div>

        <!-- Rooms Section -->
        <div id="roomsSection" class="max-w-7xl mx-auto px-4 pb-20">
            <h2 class="text-3xl font-heading text-center mb-8 text-primary dark:text-white">Choose a Room & Play!</h2>
            
            <!-- Filter System -->
            <div class="flex flex-wrap gap-4 mb-8 justify-center">
                <select id="gameTypeFilter" class="p-3 border rounded-xl dark:bg-gray-700 dark:text-white">
                    <option value="all">All Game Types</option>
                    <option value="solo">Solo</option>
                    <option value="duo">Duo</option>
                    <option value="squad">Squad</option>
                </select>
                <select id="entryFeeFilter" class="p-3 border rounded-xl dark:bg-gray-700 dark:text-white">
                    <option value="all">All Entry Fees</option>
                    <option value="10">‚Çπ10</option>
                    <option value="20">‚Çπ20</option>
                    <option value="50">‚Çπ50</option>
                    <option value="100">‚Çπ100+</option>
                </select>
                <button onclick="applyFilters()" class="bg-primary text-white px-6 py-3 rounded-xl font-bold hover:bg-secondary transition">
                    Apply Filters
                </button>
            </div>

            <p class="text-center text-gray-600 dark:text-gray-400 mb-8">Win 90% of pot | Only 10% platform fee</p>
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                <!-- 1v1 & 4v4 Rooms -->
                <div class="room-card bg-white dark:bg-gray-800 p-4 rounded-2xl shadow-lg card-hover cursor-pointer" onclick="joinRoom(10, '1v1')">
                    <div class="text-center">
                        <i class="fas fa-gamepad text-4xl text-secondary mb-2 dice-roll"></i>
                        <p class="text-2xl font-bold text-primary dark:text-white">‚Çπ10</p>
                        <p class="text-xs text-gray-600 dark:text-gray-400">Entry Fee</p>
                        <p class="text-md font-bold text-green-600 mt-1">Win ‚Çπ18</p>
                        <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">1v1 | 4v4</p>
                    </div>
                </div>
                <div class="room-card bg-white dark:bg-gray-800 p-4 rounded-2xl shadow-lg card-hover cursor-pointer" onclick="joinRoom(20, '1v1')">
                    <div class="text-center">
                        <i class="fas fa-gamepad text-4xl text-secondary mb-2 dice-roll"></i>
                        <p class="text-2xl font-bold text-primary dark:text-white">‚Çπ20</p>
                        <p class="text-xs text-gray-600 dark:text-gray-400">Entry Fee</p>
                        <p class="text-md font-bold text-green-600 mt-1">Win ‚Çπ36</p>
                        <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">1v1 | 4v4</p>
                    </div>
                </div>
                <div class="room-card bg-white dark:bg-gray-800 p-4 rounded-2xl shadow-lg card-hover cursor-pointer" onclick="joinRoom(30, '1v1')">
                    <div class="text-center">
                        <i class="fas fa-gamepad text-4xl text-secondary mb-2 dice-roll"></i>
                        <p class="text-2xl font-bold text-primary dark:text-white">‚Çπ30</p>
                        <p class="text-xs text-gray-600 dark:text-gray-400">Entry Fee</p>
                        <p class="text-md font-bold text-green-600 mt-1">Win ‚Çπ54</p>
                        <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">1v1 | 4v4</p>
                    </div>
                </div>
                <div class="room-card bg-white dark:bg-gray-800 p-4 rounded-2xl shadow-lg card-hover cursor-pointer" onclick="joinRoom(50, '1v1')">
                    <div class="text-center">
                        <i class="fas fa-gamepad text-4xl text-secondary mb-2 dice-roll"></i>
                        <p class="text-2xl font-bold text-primary dark:text-white">‚Çπ50</p>
                        <p class="text-xs text-gray-600 dark:text-gray-400">Entry Fee</p>
                        <p class="text-md font-bold text-green-600 mt-1">Win ‚Çπ90</p>
                        <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">1v1 | 4v4</p>
                    </div>
                </div>
                <div class="room-card bg-white dark:bg-gray-800 p-4 rounded-2xl shadow-lg card-hover cursor-pointer" onclick="joinRoom(100, '1v1')">
                    <div class="text-center">
                        <i class="fas fa-gamepad text-4xl text-secondary mb-2 dice-roll"></i>
                        <p class="text-2xl font-bold text-primary dark:text-white">‚Çπ100</p>
                        <p class="text-xs text-gray-600 dark:text-gray-400">Entry Fee</p>
                        <p class="text-md font-bold text-green-600 mt-1">Win ‚Çπ180</p>
                        <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">1v1 | 4v4</p>
                    </div>
                </div>
                <div class="room-card bg-white dark:bg-gray-800 p-4 rounded-2xl shadow-lg card-hover cursor-pointer" onclick="joinRoom(200, '1v1')">
                    <div class="text-center">
                        <i class="fas fa-gamepad text-4xl text-secondary mb-2 dice-roll"></i>
                        <p class="text-2xl font-bold text-primary dark:text-white">‚Çπ200</p>
                        <p class="text-xs text-gray-600 dark:text-gray-400">Entry Fee</p>
                        <p class="text-md font-bold text-green-600 mt-1">Win ‚Çπ360</p>
                        <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">1v1 | 4v4</p>
                    </div>
                </div>
                <div class="room-card bg-white dark:bg-gray-800 p-4 rounded-2xl shadow-lg card-hover cursor-pointer" onclick="joinRoom(500, '1v1')">
                    <div class="text-center">
                        <i class="fas fa-gamepad text-4xl text-secondary mb-2 dice-roll"></i>
                        <p class="text-2xl font-bold text-primary dark:text-white">‚Çπ500</p>
                        <p class="text-xs text-gray-600 dark:text-gray-400">Entry Fee</p>
                        <p class="text-md font-bold text-green-600 mt-1">Win ‚Çπ900</p>
                        <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">1v1 | 4v4</p>
                    </div>
                </div>
                <div class="room-card bg-white dark:bg-gray-800 p-4 rounded-2xl shadow-lg card-hover cursor-pointer" onclick="joinRoom(1000, '1v1')">
                    <div class="text-center">
                        <i class="fas fa-crown text-4xl text-yellow-500 mb-2"></i>
                        <p class="text-2xl font-bold text-primary dark:text-white">‚Çπ1,000</p>
                        <p class="text-xs text-gray-600 dark:text-gray-400">VIP Room</p>
                        <p class="text-md font-bold text-green-600 mt-1">Win ‚Çπ1,800</p>
                        <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">1v1 | 4v4</p>
                    </div>
                </div>
            </div>

            <!-- Ludo Game Rooms -->
            <div class="mt-12">
                <h2 class="text-3xl font-heading text-center mb-6 text-primary dark:text-white">üé≤ Ludo Game Rooms</h2>
                <p class="text-center text-gray-600 dark:text-gray-400 mb-6">Win 90% of pot | Only 10% platform fee</p>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                    <div class="room-card bg-gradient-to-br from-green-500 to-blue-500 text-white p-4 rounded-2xl shadow-lg card-hover cursor-pointer" onclick="joinLudoRoom(50, 90, 1)">
                        <div class="text-center">
                            <i class="fas fa-dice text-4xl mb-2"></i>
                            <p class="text-2xl font-bold">‚Çπ50</p>
                            <p class="text-xs">Ticket</p>
                            <p class="text-md font-bold mt-1">Win ‚Çπ90</p>
                            <p class="text-xs mt-1">Travel 1</p>
                        </div>
                    </div>
                    <div class="room-card bg-gradient-to-br from-green-500 to-blue-500 text-white p-4 rounded-2xl shadow-lg card-hover cursor-pointer" onclick="joinLudoRoom(100, 180, 2)">
                        <div class="text-center">
                            <i class="fas fa-dice text-4xl mb-2"></i>
                            <p class="text-2xl font-bold">‚Çπ100</p>
                            <p class="text-xs">Ticket</p>
                            <p class="text-md font-bold mt-1">Win ‚Çπ180</p>
                            <p class="text-xs mt-1">Travel 2</p>
                        </div>
                    </div>
                    <div class="room-card bg-gradient-to-br from-green-500 to-blue-500 text-white p-4 rounded-2xl shadow-lg card-hover cursor-pointer" onclick="joinLudoRoom(200, 360, 3)">
                        <div class="text-center">
                            <i class="fas fa-dice text-4xl mb-2"></i>
                            <p class="text-2xl font-bold">‚Çπ200</p>
                            <p class="text-xs">Ticket</p>
                            <p class="text-md font-bold mt-1">Win ‚Çπ360</p>
                            <p class="text-xs mt-1">Travel 3</p>
                        </div>
                    </div>
                    <div class="room-card bg-gradient-to-br from-green-500 to-blue-500 text-white p-4 rounded-2xl shadow-lg card-hover cursor-pointer" onclick="joinLudoRoom(500, 900, 4)">
                        <div class="text-center">
                            <i class="fas fa-dice text-4xl mb-2"></i>
                            <p class="text-2xl font-bold">‚Çπ500</p>
                            <p class="text-xs">Ticket</p>
                            <p class="text-md font-bold mt-1">Win ‚Çπ900</p>
                            <p class="text-xs mt-1">Travel 4</p>
                        </div>
                    </div>
                    <div class="room-card bg-gradient-to-br from-green-500 to-blue-500 text-white p-4 rounded-2xl shadow-lg card-hover cursor-pointer" onclick="joinLudoRoom(1000, 1800, 5)">
                        <div class="text-center">
                            <i class="fas fa-dice text-4xl mb-2"></i>
                            <p class="text-2xl font-bold">‚Çπ1000</p>
                            <p class="text-xs">Ticket</p>
                            <p class="text-md font-bold mt-1">Win ‚Çπ1800</p>
                            <p class="text-xs mt-1">Travel 5</p>
                        </div>
                    </div>
                    <div class="room-card bg-gradient-to-br from-green-500 to-blue-500 text-white p-4 rounded-2xl shadow-lg card-hover cursor-pointer" onclick="joinLudoRoom(2000, 3600, 6)">
                        <div class="text-center">
                            <i class="fas fa-dice text-4xl mb-2"></i>
                            <p class="text-2xl font-bold">‚Çπ2000</p>
                            <p class="text-xs">Ticket</p>
                            <p class="text-md font-bold mt-1">Win ‚Çπ3600</p>
                            <p class="text-xs mt-1">Travel 6</p>
                        </div>
                    </div>
                    <div class="room-card bg-gradient-to-br from-green-500 to-blue-500 text-white p-4 rounded-2xl shadow-lg card-hover cursor-pointer" onclick="joinLudoRoom(5000, 9000, 7)">
                        <div class="text-center">
                            <i class="fas fa-dice text-4xl mb-2"></i>
                            <p class="text-2xl font-bold">‚Çπ5000</p>
                            <p class="text-xs">Ticket</p>
                            <p class="text-md font-bold mt-1">Win ‚Çπ9000</p>
                            <p class="text-xs mt-1">Travel 7</p>
                        </div>
                    </div>
                    <div class="room-card bg-gradient-to-br from-green-500 to-blue-500 text-white p-4 rounded-2xl shadow-lg card-hover cursor-pointer" onclick="joinLudoRoom(10000, 18000, 8)">
                        <div class="text-center">
                            <i class="fas fa-dice text-4xl mb-2"></i>
                            <p class="text-2xl font-bold">‚Çπ10000</p>
                            <p class="text-xs">Ticket</p>
                            <p class="text-md font-bold mt-1">Win ‚Çπ18000</p>
                            <p class="text-xs mt-1">Travel 8</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Erangel / Classic Mode -->
            <div class="mt-12">
                <h2 class="text-3xl font-heading text-center mb-6 text-primary dark:text-white">Erangel / Classic Mode</h2>
                <p class="text-center text-gray-600 dark:text-gray-400 mb-6">Per Kill = 50% of Entry Fee</p>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                    <div class="room-card bg-gradient-to-br from-blue-500 to-purple-600 text-white p-4 rounded-2xl shadow-lg card-hover cursor-pointer" onclick="joinErangel(10)">
                        <div class="text-center">
                            <i class="fas fa-map text-4xl mb-2"></i>
                            <p class="text-2xl font-bold">‚Çπ10</p>
                            <p class="text-xs">Entry</p>
                            <p class="text-md font-bold mt-1">‚Çπ5 per kill</p>
                        </div>
                    </div>
                    <div class="room-card bg-gradient-to-br from-blue-500 to-purple-600 text-white p-4 rounded-2xl shadow-lg card-hover cursor-pointer" onclick="joinErangel(20)">
                        <div class="text-center">
                            <i class="fas fa-map text-4xl mb-2"></i>
                            <p class="text-2xl font-bold">‚Çπ20</p>
                            <p class="text-xs">Entry</p>
                            <p class="text-md font-bold mt-1">‚Çπ10 per kill</p>
                        </div>
                    </div>
                    <div class="room-card bg-gradient-to-br from-blue-500 to-purple-600 text-white p-4 rounded-2xl shadow-lg card-hover cursor-pointer" onclick="joinErangel(30)">
                        <div class="text-center">
                            <i class="fas fa-map text-4xl mb-2"></i>
                            <p class="text-2xl font-bold">‚Çπ30</p>
                            <p class="text-xs">Entry</p>
                            <p class="text-md font-bold mt-1">‚Çπ15 per kill</p>
                        </div>
                    </div>
                    <div class="room-card bg-gradient-to-br from-blue-500 to-purple-600 text-white p-4 rounded-2xl shadow-lg card-hover cursor-pointer" onclick="joinErangel(50)">
                        <div class="text-center">
                            <i class="fas fa-map text-4xl mb-2"></i>
                            <p class="text-2xl font-bold">‚Çπ50</p>
                            <p class="text-xs">Entry</p>
                            <p class="text-md font-bold mt-1">‚Çπ25 per kill</p>
                        </div>
                    </div>
                    <div class="room-card bg-gradient-to-br from-blue-500 to-purple-600 text-white p-4 rounded-2xl shadow-lg card-hover cursor-pointer" onclick="joinErangel(100)">
                        <div class="text-center">
                            <i class="fas fa-map text-4xl mb-2"></i>
                            <p class="text-2xl font-bold">‚Çπ100</p>
                            <p class="text-xs">Entry</p>
                            <p class="text-md font-bold mt-1">‚Çπ50 per kill</p>
                        </div>
                    </div>
                    <div class="room-card bg-gradient-to-br from-blue-500 to-purple-600 text-white p-4 rounded-2xl shadow-lg card-hover cursor-pointer" onclick="joinErangel(200)">
                        <div class="text-center">
                            <i class="fas fa-map text-4xl mb-2"></i>
                            <p class="text-2xl font-bold">‚Çπ200</p>
                            <p class="text-xs">Entry</p>
                            <p class="text-md font-bold mt-1">‚Çπ100 per kill</p>
                        </div>
                    </div>
                    <div class="room-card bg-gradient-to-br from-blue-500 to-purple-600 text-white p-4 rounded-2xl shadow-lg card-hover cursor-pointer" onclick="joinErangel(300)">
                        <div class="text-center">
                            <i class="fas fa-map text-4xl mb-2"></i>
                            <p class="text-2xl font-bold">‚Çπ300</p>
                            <p class="text-xs">Entry</p>
                            <p class="text-md font-bold mt-1">‚Çπ150 per kill</p>
                        </div>
                    </div>
                    <div class="room-card bg-gradient-to-br from-blue-500 to-purple-600 text-white p-4 rounded-2xl shadow-lg card-hover cursor-pointer" onclick="joinErangel(500)">
                        <div class="text-center">
                            <i class="fas fa-map text-4xl mb-2"></i>
                            <p class="text-2xl font-bold">‚Çπ500</p>
                            <p class="text-xs">Entry</p>
                            <p class="text-md font-bold mt-1">‚Çπ250 per kill</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Spin Wheel Section -->
        <div id="spinwheelSection" class="hidden max-w-4xl mx-auto px-4 py-10">
            <div class="bg-white dark:bg-gray-800 p-8 rounded-3xl shadow-xl">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-3xl font-heading text-primary dark:text-white">üé° Spin & Win</h2>
                    <button onclick="showSection('rooms')" class="bg-primary text-white px-6 py-2 rounded-full hover:bg-secondary transition">
                        <i class="fas fa-arrow-left mr-2"></i>Back to Dashboard
                    </button>
                </div>
                
                <div class="text-center">
                    <div class="bg-gradient-to-r from-purple-500 to-pink-500 rounded-full w-64 h-64 mx-auto mb-6 flex items-center justify-center relative">
                        <div id="wheel" class="w-60 h-60 rounded-full bg-white relative">
                            <!-- Wheel segments will be generated by JavaScript -->
                        </div>
                        <div class="absolute top-1/2 right-0 transform -translate-y-1/2 w-8 h-8 bg-red-500 rounded-full"></div>
                    </div>
                    
                    <button onclick="spinWheel()" class="bg-green-500 text-white px-8 py-3 rounded-full text-lg font-bold hover:bg-green-600 transition">
                        <i class="fas fa-sync-alt mr-2"></i>Spin Wheel (Cost: ‚Çπ10)
                    </button>
                    
                    <div id="spinResult" class="mt-4 text-xl font-bold text-primary dark:text-white"></div>
                </div>
            </div>
        </div>

        <!-- Leaderboard Section -->
        <div id="leaderboardSection" class="hidden max-w-6xl mx-auto px-4 py-10">
            <div class="bg-white dark:bg-gray-800 p-8 rounded-3xl shadow-xl">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-3xl font-heading text-primary dark:text-white">üèÜ Leaderboard</h2>
                    <button onclick="showSection('rooms')" class="bg-primary text-white px-6 py-2 rounded-full hover:bg-secondary transition">
                        <i class="fas fa-arrow-left mr-2"></i>Back to Dashboard
                    </button>
                </div>
                
                <div class="grid md:grid-cols-3 gap-6 mb-8">
                    <div class="bg-light dark:bg-gray-700 p-6 rounded-2xl">
                        <h3 class="text-xl font-bold text-primary dark:text-white mb-4">üéØ Top Players</h3>
                        <div id="topPlayers" class="space-y-3">
                            <!-- Top players will be loaded here -->
                        </div>
                    </div>
                    <div class="bg-light dark:bg-gray-700 p-6 rounded-2xl">
                        <h3 class="text-xl font-bold text-primary dark:text-white mb-4">üí∞ Top Depositors</h3>
                        <div id="topDepositors" class="space-y-3">
                            <!-- Top depositors will be loaded here -->
                        </div>
                    </div>
                    <div class="bg-light dark:bg-gray-700 p-6 rounded-2xl">
                        <h3 class="text-xl font-bold text-primary dark:text-white mb-4">üë• Top Referrers</h3>
                        <div id="topReferrers" class="space-y-3">
                            <!-- Top referrers will be loaded here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Profile Section -->
        <div id="profileSection" class="hidden max-w-4xl mx-auto px-4 py-10">
            <div class="bg-white dark:bg-gray-800 p-8 rounded-3xl shadow-xl">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-3xl font-heading text-primary dark:text-white">Your Profile</h2>
                    <button onclick="showSection('rooms')" class="bg-primary text-white px-6 py-2 rounded-full hover:bg-secondary transition">
                        <i class="fas fa-arrow-left mr-2"></i>Back to Dashboard
                    </button>
                </div>
                <div class="space-y-6">
                    <div class="grid md:grid-cols-2 gap-6">
                        <div class="p-6 bg-light dark:bg-gray-700 rounded-2xl">
                            <h3 class="text-xl font-bold text-primary dark:text-white mb-4">Personal Info</h3>
                            <div class="space-y-3 dark:text-gray-300">
                                <p><strong>Name:</strong> <span id="profileName">-</span></p>
                                <p><strong>Email:</strong> <span id="profileEmail">-</span></p>
                                <p><strong>Phone:</strong> <span id="profilePhone">-</span></p>
                                <p><strong>Username:</strong> <span id="profileUsername">-</span></p>
                                <p><strong>Joined Date:</strong> <span id="profileJoinDate">-</span></p>
                                <p><strong>VIP Status:</strong> <span id="profileVIP">None</span> <span id="vipBadge" class="blue-tick ml-2"></span></p>
                            </div>
                        </div>
                        <div class="p-6 bg-light dark:bg-gray-700 rounded-2xl">
                            <h3 class="text-xl font-bold text-primary dark:text-white mb-4">Account Stats</h3>
                            <div class="space-y-3 dark:text-gray-300">
                                <p><strong>Wallet Balance:</strong> ‚Çπ<span id="profileBalance">0</span></p>
                                <p><strong>Total Games Played:</strong> <span id="profileGames">0</span></p>
                                <p><strong>Total Winnings:</strong> ‚Çπ<span id="profileWinnings">0</span></p>
                                <p><strong>Withdrawals:</strong> ‚Çπ<span id="profileWithdrawals">0</span></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- History Section -->
        <div id="historySection" class="hidden max-w-6xl mx-auto px-4 py-10">
            <div class="bg-white dark:bg-gray-800 p-8 rounded-3xl shadow-xl">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-3xl font-heading text-primary dark:text-white">Your History</h2>
                    <button onclick="showSection('rooms')" class="bg-primary text-white px-6 py-2 rounded-full hover:bg-secondary transition">
                        <i class="fas fa-arrow-left mr-2"></i>Back to Dashboard
                    </button>
                </div>
                <div class="space-y-6">
                    <div class="p-6 bg-light dark:bg-gray-700 rounded-2xl">
                        <h3 class="text-xl font-bold text-primary dark:text-white mb-4">Recent Transactions</h3>
                        <div id="transactionHistory" class="space-y-3">
                            <p class="text-center text-gray-500 dark:text-gray-400">No transactions yet</p>
                        </div>
                    </div>
                    <div class="grid md:grid-cols-2 gap-6">
                        <div class="p-6 bg-light dark:bg-gray-700 rounded-2xl">
                            <h3 class="text-xl font-bold text-primary dark:text-white mb-4">Game History</h3>
                            <div id="gameHistory" class="space-y-3">
                                <p class="text-center text-gray-500 dark:text-gray-400">No games played yet</p>
                            </div>
                        </div>
                        <div class="p-6 bg-light dark:bg-gray-700 rounded-2xl">
                            <h3 class="text-xl font-bold text-primary dark:text-white mb-4">Withdrawal History</h3>
                            <div id="withdrawalHistory" class="space-y-3">
                                <p class="text-center text-gray-500 dark:text-gray-400">No withdrawals yet</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Referral Section -->
        <div id="referralSection" class="hidden max-w-4xl mx-auto px-4 py-10">
            <div class="bg-white dark:bg-gray-800 p-8 rounded-3xl shadow-xl">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-3xl font-heading text-primary dark:text-white">Refer & Earn</h2>
                    <button onclick="showSection('rooms')" class="bg-primary text-white px-6 py-2 rounded-full hover:bg-secondary transition">
                        <i class="fas fa-arrow-left mr-2"></i>Back to Dashboard
                    </button>
                </div>
                
                <div class="grid md:grid-cols-2 gap-8 mb-8">
                    <div class="bg-gradient-to-br from-primary to-secondary text-white p-6 rounded-2xl">
                        <h3 class="text-xl font-bold mb-4">üéØ Your Referral Stats</h3>
                        <div class="space-y-3">
                            <p><strong>Referral Code:</strong> <span id="referralCode" class="bg-white bg-opacity-20 px-2 py-1 rounded">Loading...</span></p>
                            <p><strong>Total Referrals:</strong> <span id="totalReferrals">0</span></p>
                            <p><strong>Referral Earnings:</strong> ‚Çπ<span id="referralEarnings">0</span></p>
                            <p><strong>Pending Commission:</strong> ‚Çπ<span id="pendingCommission">0</span></p>
                        </div>
                    </div>
                    
                    <div class="bg-light dark:bg-gray-700 p-6 rounded-2xl">
                        <h3 class="text-xl font-bold text-primary dark:text-white mb-4">üí∞ How it Works</h3>
                        <div class="space-y-3 text-sm dark:text-gray-300">
                            <p>‚úÖ <strong>2% Commission</strong> on every direct member's deposit</p>
                            <p>‚úÖ Share your unique referral code</p>
                            <p>‚úÖ Earn when your friends deposit money</p>
                            <p>‚úÖ Withdraw referral earnings anytime</p>
                        </div>
                    </div>
                </div>

                <div class="bg-yellow-50 dark:bg-yellow-900 border border-yellow-200 dark:border-yellow-700 rounded-2xl p-6 mb-6">
                    <h3 class="text-xl font-bold text-primary dark:text-white mb-4">üì§ Your Referral Code</h3>
                    <div class="text-center mb-4">
                        <div class="bg-white dark:bg-gray-800 p-4 rounded-xl border-2 border-primary inline-block">
                            <p class="text-3xl font-bold text-primary dark:text-white" id="referralCodeDisplay">Loading...</p>
                            <p class="text-sm text-gray-600 dark:text-gray-400 mt-2">Share this code with friends</p>
                        </div>
                    </div>
                    <div class="text-center">
                        <button onclick="copyReferralCode()" class="bg-primary text-white px-6 py-3 rounded-xl font-bold hover:bg-secondary transition">
                            <i class="fas fa-copy mr-2"></i>Copy Referral Code
                        </button>
                    </div>
                    <p class="text-sm text-gray-600 dark:text-gray-400 text-center mt-3">Share this code with friends! When they sign up using your code, you get 2% commission on their deposits!</p>
                </div>

                <div class="bg-light dark:bg-gray-700 p-6 rounded-2xl">
                    <h3 class="text-xl font-bold text-primary dark:text-white mb-4">üë• Your Referrals & Commission History</h3>
                    <div id="referralList" class="space-y-3">
                        <p class="text-center text-gray-500 dark:text-gray-400">No referrals yet. Share your code to start earning!</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- DEPOSIT SECTION -->
        <div id="depositSection" class="hidden max-w-4xl mx-auto px-4 py-10">
            <div class="bg-white dark:bg-gray-800 p-8 rounded-3xl shadow-xl">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-3xl font-heading text-primary dark:text-white text-center">Deposit Money</h2>
                    <button onclick="showSection('rooms')" class="bg-primary text-white px-6 py-2 rounded-full hover:bg-secondary transition">
                        <i class="fas fa-arrow-left mr-2"></i>Back to Dashboard
                    </button>
                </div>
                
                <!-- UPI ID Display -->
                <div class="mb-6 p-4 bg-yellow-50 dark:bg-yellow-900 rounded-xl border border-yellow-200 dark:border-yellow-700">
                    <p class="text-center font-bold text-lg dark:text-white">Send payment to: <span class="text-primary" id="currentUPI">millnerkaptan01@fam</span></p>
                    <p class="text-center text-sm mt-2 dark:text-gray-300">After payment, send screenshot to confirm</p>
                </div>

                <!-- QR Code Section -->
                <div class="mb-6">
                    <h3 class="text-xl font-bold text-primary dark:text-white mb-4 text-center">Scan QR Code to Pay</h3>
                    
                    <!-- Current QR Code -->
                    <div id="currentQR" class="text-center mb-4">
                        <img src=".https://drive.google.com/file/d/1oXDIdXhWzYTBypvtY31ZS4rd_YK-E6qk/view?usp=drivesdk" alt="QR Code 1" class="mx-auto border-4 border-primary rounded-xl w-64 h-64 object-contain bg-white p-4">
                        <p class="text-sm text-gray-600 dark:text-gray-400 mt-2">QR Code 1 - UPI: millnerkaptan01@fam</p>
                    </div>

                    <!-- QR Change Button -->
                    <div class="text-center">
                        <button onclick="changeQRCode()" class="bg-secondary text-white px-6 py-2 rounded-full hover:bg-primary transition">
                            <i class="fas fa-sync-alt mr-2"></i>Change QR Code
                        </button>
                    </div>
                </div>

                <input type="number" id="depositAmount" placeholder="Enter Amount (min ‚Çπ10)" class="w-full p-4 border-2 border-secondary rounded-xl mb-4 dark:bg-gray-700 dark:text-white" min="10">
                <button onclick="sendDepositToWhatsApp()" class="w-full bg-green-500 text-white py-4 rounded-xl font-bold text-lg hover:opacity-90 transition">
                    Send Request on WhatsApp
                </button>
            </div>
        </div>

        <!-- WITHDRAW SECTION -->
        <div id="withdrawSection" class="hidden max-w-4xl mx-auto px-4 py-10">
            <div class="bg-white dark:bg-gray-800 p-8 rounded-3xl shadow-xl">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-3xl font-heading text-primary dark:text-white text-center">Withdraw Money</h2>
                    <button onclick="showSection('rooms')" class="bg-primary text-white px-6 py-2 rounded-full hover:bg-secondary transition">
                        <i class="fas fa-arrow-left mr-2"></i>Back to Dashboard
                    </button>
                </div>
                <input type="number" id="withdrawAmount" placeholder="Enter Amount (min ‚Çπ100)" class="w-full p-4 border-2 border-secondary rounded-xl mb-4 dark:bg-gray-700 dark:text-white" min="100">
                <select id="withdrawMethod" class="w-full p-4 border-2 border-secondary rounded-xl mb-4 dark:bg-gray-700 dark:text-white" onchange="toggleWithdrawFields()">
                    <option value="upi">UPI</option>
                    <option value="bank">Bank Transfer</option>
                </select>
                <div id="upiField" class="hidden mb-4">
                    <input type="text" id="upiId" placeholder="Enter UPI ID" class="w-full p-4 border-2 border-secondary rounded-xl dark:bg-gray-700 dark:text-white">
                </div>
                <div id="bankFields" class="hidden space-y-2">
                    <input type="text" id="accName" placeholder="Account Holder Name" class="w-full p-4 border-2 border-secondary rounded-xl dark:bg-gray-700 dark:text-white">
                    <input type="text" id="accNumber" placeholder="Account Number" class="w-full p-4 border-2 border-secondary rounded-xl dark:bg-gray-700 dark:text-white">
                    <input type="text" id="ifsc" placeholder="IFSC Code" class="w-full p-4 border-2 border-secondary rounded-xl dark:bg-gray-700 dark:text-white">
                </div>
                <button onclick="sendWithdrawToWhatsApp()" class="w-full bg-red-500 text-white py-4 rounded-xl font-bold hover:opacity-90 transition mt-4">
                    Submit Request on WhatsApp
                </button>
            </div>
        </div>

        <!-- Admin Panel -->
        <div id="adminSection" class="hidden max-w-6xl mx-auto px-4 py-16">
            <div class="bg-white dark:bg-gray-800 rounded-3xl shadow-xl p-8">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-3xl font-heading text-primary dark:text-white text-center">Admin Panel</h2>
                    <button onclick="showSection('rooms')" class="bg-primary text-white px-6 py-2 rounded-full hover:bg-secondary transition">
                        <i class="fas fa-arrow-left mr-2"></i>Back to Dashboard
                    </button>
                </div>
                <div class="mb-6 p-4 bg-light dark:bg-gray-700 rounded-xl text-center">
                    <p class="text-xl font-bold dark:text-white">Total Registered Users: <span id="totalUsers">0</span></p>
                </div>
                
                <!-- VIP Activation Section -->
                <div class="mb-6 bg-light dark:bg-gray-700 p-6 rounded-2xl">
                    <h3 class="text-xl font-bold mb-4 dark:text-white">Activate VIP Membership</h3>
                    <div class="grid md:grid-cols-4 gap-4 mb-4">
                        <input type="email" id="adminUserEmailVIP" placeholder="User Email" class="p-3 border rounded-xl dark:bg-gray-600 dark:text-white">
                        <select id="adminVIPLevel" class="p-3 border rounded-xl dark:bg-gray-600 dark:text-white">
                            <option value="1">VIP 1</option>
                            <option value="2">VIP 2</option>
                            <option value="3">VIP 3</option>
                        </select>
                        <select id="adminVIPDuration" class="p-3 border rounded-xl dark:bg-gray-600 dark:text-white">
                            <option value="monthly">Monthly</option>
                            <option value="yearly">Yearly</option>
                        </select>
                        <button onclick="activateVIP()" class="bg-purple-500 text-white px-4 py-3 rounded-xl font-bold hover:bg-purple-600 transition">
                            Activate VIP
                        </button>
                    </div>
                </div>

                <!-- User Stats Update Section -->
                <div class="mb-6 bg-light dark:bg-gray-700 p-6 rounded-2xl">
                    <h3 class="text-xl font-bold mb-4 dark:text-white">Update User Stats</h3>
                    <div class="grid md:grid-cols-4 gap-4 mb-4">
                        <input type="email" id="adminUserEmailStats" placeholder="User Email" class="p-3 border rounded-xl dark:bg-gray-600 dark:text-white">
                        <input type="number" id="adminUserWinnings" placeholder="Total Winnings" class="p-3 border rounded-xl dark:bg-gray-600 dark:text-white">
                        <input type="number" id="adminUserWithdrawals" placeholder="Total Withdrawals" class="p-3 border rounded-xl dark:bg-gray-600 dark:text-white">
                        <button onclick="updateUserStats()" class="bg-purple-500 text-white px-4 py-3 rounded-xl font-bold hover:bg-purple-600 transition">
                            Update Stats
                        </button>
                    </div>
                </div>

                <!-- Referral Stats Update Section -->
                <div class="mb-6 bg-light dark:bg-gray-700 p-6 rounded-2xl">
                    <h3 class="text-xl font-bold mb-4 dark:text-white">Update Referral Stats</h3>
                    <div class="grid md:grid-cols-4 gap-4 mb-4">
                        <input type="email" id="adminUserEmailReferral" placeholder="User Email" class="p-3 border rounded-xl dark:bg-gray-600 dark:text-white">
                        <input type="number" id="adminUserReferrals" placeholder="Total Referrals" class="p-3 border rounded-xl dark:bg-gray-600 dark:text-white">
                        <input type="number" id="adminUserReferralEarnings" placeholder="Referral Earnings" class="p-3 border rounded-xl dark:bg-gray-600 dark:text-white">
                        <button onclick="updateReferralStats()" class="bg-blue-500 text-white px-4 py-3 rounded-xl font-bold hover:bg-blue-600 transition">
                            Update Referral
                        </button>
                    </div>
                </div>

                <div class="mb-6">
                    <h3 class="text-xl font-bold mb-4 dark:text-white">Add Funds to User</h3>
                    <div class="flex gap-4 mb-4">
                        <input type="email" id="adminUserEmail" placeholder="User Email" class="flex-1 p-3 border rounded-xl dark:bg-gray-600 dark:text-white">
                        <input type="number" id="adminFundAmount" placeholder="Amount" class="w-32 p-3 border rounded-xl dark:bg-gray-600 dark:text-white">
                        <button onclick="addFundToUser()" class="bg-green-500 text-white px-6 py-3 rounded-xl font-bold">Add Funds</button>
                    </div>
                </div>
                <div class="mb-6">
                    <h3 class="text-xl font-bold mb-4 dark:text-white">Deduct Funds from User</h3>
                    <div class="flex gap-4 mb-4">
                        <input type="email" id="adminUserEmailDeduct" placeholder="User Email" class="flex-1 p-3 border rounded-xl dark:bg-gray-600 dark:text-white">
                        <input type="number" id="adminDeductAmount" placeholder="Amount" class="w-32 p-3 border rounded-xl dark:bg-gray-600 dark:text-white">
                        <button onclick="deductFundFromUser()" class="bg-red-500 text-white px-6 py-3 rounded-xl font-bold">Deduct Funds</button>
                    </div>
                </div>
                <div id="adminUserList" class="space-y-4 max-h-96 overflow-y-auto"></div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-dark text-white py-8">
        <div class="max-w-7xl mx-auto px-4 text-center">
            <p class="mb-2">¬© 2025 Free Fire & PUBG. All rights reserved.</p>
            <p class="text-sm">Play responsibly. 18+ only.</p>
            <div class="mt-4 flex justify-center space-x-4">
                <a href="https://wa.me/12264939021" target="_blank" class="text-green-400 hover:text-green-300">
                    <i class="fab fa-whatsapp text-xl"></i> Support
                </a>
                <a href="https://t.me/+_W2RKTlpHI81MjJl" target="_blank" class="text-blue-400 hover:text-blue-300">
                    <i class="fab fa-telegram text-xl"></i> Telegram
                </a>
            </div>
        </div>
    </footer>

    <!-- JavaScript -->
    <script>
        // Cloud Database Configuration
        const JSONBIN_API_KEY = '$2a$10$e50.WfbjPMQ1HVr7CWQzVO673PQR9xTlX5OueFLvimwSsT5qVbUgG';
        const JSONBIN_BIN_ID = '6909b47fae596e708f43562d';
        
        let currentUser = null;
        let users = [];
        let isAdmin = false;
        let currentQR = 1;
        let isDarkMode = false;
        let currentLanguage = 'english';

        // QR Codes Data - Proper QR codes
        const qrCodes = [
            { 
                src: "https://i.ibb.co/0Q8L2J9/qr1.jpg", 
                label: "QR Code 1 - UPI: millnerkaptan01@fam",
                upi: "millnerkaptan01@fam"
            },
            { 
                src: "https://i.ibb.co/5KjJ0Y2/qr2.jpg", 
                label: "QR Code 2 - UPI: hbk@ybl",
                upi: "hbk@ybl" 
            },
            { 
                src: "https://i.ibb.co/0Q8L2J9/qr1.jpg", 
                label: "QR Code 3 - UPI: @mbk",
                upi: "@mbk"
            }
        ];

        // Spin Wheel Prizes - More realistic win/loss ratio
        const wheelPrizes = ['‚Çπ0', '‚Çπ1', '‚Çπ3', '‚Çπ0', '‚Çπ5', '‚Çπ0', '‚Çπ7', '‚Çπ8', '‚Çπ0', '‚Çπ10'];

        // Live Stats Data
        const transactions = [
            "Amit won ‚Çπ180 in 1v1 battle",
            "Priya deposited ‚Çπ500",
            "Raj withdrew ‚Çπ1200",
            "Sneha won ‚Çπ360 in Erangel",
            "Vikash joined with referral",
            "Neha won ‚Çπ900 in VIP room",
            "Rohan deposited ‚Çπ1000",
            "Pooja withdrew ‚Çπ750",
            "Karan won ‚Çπ1800 in VIP",
            "Sonia deposited ‚Çπ2000"
        ];

        // Multi-language support
        const translations = {
            english: {
                welcome: "Welcome back,",
                walletBalance: "Wallet Balance",
                playNow: "Play Now & Win ‚Çπ500!",
                joinTelegram: "Join Our Telegram Community",
                referralBonus: "Get 2% Commission on Every Direct Member's Deposit!"
            },
            hindi: {
                welcome: "‡§µ‡§æ‡§™‡§∏‡•Ä ‡§™‡§∞ ‡§∏‡•ç‡§µ‡§æ‡§ó‡§§ ‡§π‡•à,",
                walletBalance: "‡§µ‡•â‡§≤‡•á‡§ü ‡§¨‡•à‡§≤‡•á‡§Ç‡§∏",
                playNow: "‡§Ö‡§≠‡•Ä ‡§ñ‡•á‡§≤‡•á‡§Ç ‡§î‡§∞ ‚Çπ500 ‡§ú‡•Ä‡§§‡•á‡§Ç!",
                joinTelegram: "‡§π‡§Æ‡§æ‡§∞‡•á ‡§ü‡•á‡§≤‡•Ä‡§ó‡•ç‡§∞‡§æ‡§Æ ‡§∏‡§Æ‡•Å‡§¶‡§æ‡§Ø ‡§Æ‡•á‡§Ç ‡§∂‡§æ‡§Æ‡§ø‡§≤ ‡§π‡•ã‡§Ç",
                referralBonus: "‡§π‡§∞ ‡§∏‡•Ä‡§ß‡•á ‡§∏‡§¶‡§∏‡•ç‡§Ø ‡§ï‡•á ‡§°‡§ø‡§™‡•â‡§ú‡§ø‡§ü ‡§™‡§∞ 2% ‡§ï‡§Æ‡•Ä‡§∂‡§® ‡§™‡§æ‡§è‡§Ç!"
            }
        };

        // Initialize Live Stats
        function initializeLiveStats() {
            // Update main stats every 3 seconds
            setInterval(() => {
                document.getElementById('liveUsers').textContent = 
                    (Math.floor(Math.random() * 20000) + 50000).toLocaleString();
                document.getElementById('totalDeposit').textContent = 
                    '‚Çπ' + (Math.floor(Math.random() * 50000) + 150000).toLocaleString();
                document.getElementById('totalWithdrawal').textContent = 
                    '‚Çπ' + (Math.floor(Math.random() * 40000) + 120000).toLocaleString();
                document.getElementById('liveWinners').textContent = 
                    (Math.floor(Math.random() * 1000) + 2000).toLocaleString();
            }, 3000);

            // Update live transactions every 5 seconds
            setInterval(updateLiveTransactions, 5000);
            updateLiveTransactions();
        }

        function updateLiveTransactions() {
            const container = document.getElementById('liveTransactions');
            const shuffled = [...transactions].sort(() => 0.5 - Math.random()).slice(0, 3);
            
            container.innerHTML = shuffled.map(transaction => 
                `<div class="flex items-center justify-between py-1 border-b border-white border-opacity-20 live-transaction">
                    <span class="text-xs">${transaction}</span>
                    <span class="text-accent font-bold text-xs">Just now</span>
                </div>`
            ).join('');
        }

        // Theme Toggle
        function toggleTheme() {
            isDarkMode = !isDarkMode;
            document.body.classList.toggle('dark-mode', isDarkMode);
            const themeIcon = document.querySelector('#themeToggle i');
            themeIcon.className = isDarkMode ? 'fas fa-sun' : 'fas fa-moon';
            localStorage.setItem('darkMode', isDarkMode);
        }

        // Language Toggle
        function toggleLanguage() {
            currentLanguage = currentLanguage === 'english' ? 'hindi' : 'english';
            updateLanguage();
            localStorage.setItem('language', currentLanguage);
        }

        function updateLanguage() {
            const trans = translations[currentLanguage];
            document.querySelector('button[onclick="showSignup()"]').textContent = trans.playNow;
            // Update other texts as needed
        }

        // QR Code Functions
        function changeQRCode() {
            currentQR = (currentQR % 3) + 1;
            const qrContainer = document.getElementById('currentQR');
            const upiDisplay = document.getElementById('currentUPI');
            qrContainer.innerHTML = `
                <img src="${qrCodes[currentQR-1].src}" alt="${qrCodes[currentQR-1].label}" class="mx-auto border-4 border-primary rounded-xl w-64 h-64 object-contain bg-white p-4">
                <p class="text-sm text-gray-600 dark:text-gray-400 mt-2">${qrCodes[currentQR-1].label}</p>
            `;
            upiDisplay.textContent = qrCodes[currentQR-1].upi;
        }

        // VIP Membership Functions
        function upgradeVIP(level) {
            if (!currentUser) {
                alert('Please login first!');
                return;
            }
            
            let price = 0;
            let duration = 'monthly';
            
            if (level === 1) {
                price = 199;
            } else if (level === 2) {
                price = 499;
            } else if (level === 3) {
                price = 900;
            }
            
            const msg = `üéÆ VIP UPGRADE REQUEST üéÆ
üë§ User: ${currentUser.username}
üìß Email: ${currentUser.email}
üì± Phone: ${currentUser.phone}
üí∞ VIP Level: ${level}
üíµ Price: ‚Çπ${price}
‚è∞ Duration: ${duration}
‚è∞ Timestamp: ${new Date().toLocaleString()}
üîó Platform: Free Fire & PUBG Tournament`;

            window.open(`https://wa.me/12264939021?text=${encodeURIComponent(msg)}`, '_blank');
        }

        // Admin VIP Activation
        function activateVIP() {
            const email = document.getElementById('adminUserEmailVIP').value.trim().toLowerCase();
            const level = document.getElementById('adminVIPLevel').value;
            const duration = document.getElementById('adminVIPDuration').value;
            
            if (!email) return alert('Enter user email');

            const user = users.find(u => u.email.toLowerCase() === email);
            if (!user) return alert('User not found!');

            user.vipLevel = parseInt(level);
            user.vipDuration = duration;
            user.vipActive = true;
            
            // Set VIP expiry date
            const expiryDate = new Date();
            if (duration === 'monthly') {
                expiryDate.setMonth(expiryDate.getMonth() + 1);
            } else {
                expiryDate.setFullYear(expiryDate.getFullYear() + 1);
            }
            user.vipExpiry = expiryDate.toISOString();

            saveUsersToCloud();
            alert(`VIP ${level} activated for ${user.username} (${duration})`);
            
            // Clear fields
            document.getElementById('adminUserEmailVIP').value = '';
        }

        // Spin Wheel Function - Improved with realistic win/loss
        function spinWheel() {
            if (!currentUser) {
                alert('Please login first!');
                return;
            }
            
            if (currentUser.balance < 10) {
                alert('Insufficient balance! Need ‚Çπ10 to spin.');
                return;
            }

            currentUser.balance -= 10;
            updateBalance();

            const wheel = document.getElementById('wheel');
            const resultDiv = document.getElementById('spinResult');
            
            wheel.classList.add('spin-wheel');
            resultDiv.textContent = 'Spinning...';

            setTimeout(() => {
                // More realistic win/loss ratio - mostly small wins/losses
                const randomIndex = Math.floor(Math.random() * wheelPrizes.length);
                const prize = wheelPrizes[randomIndex];
                const prizeAmount = parseInt(prize.replace('‚Çπ', '')) || 0;
                
                currentUser.balance += prizeAmount;
                updateBalance();
                
                if (prizeAmount > 0) {
                    resultDiv.textContent = `Congratulations! You won ${prize}!`;
                    // Add confetti effect for wins
                    createConfetti();
                } else {
                    resultDiv.textContent = `Better luck next time! You won ${prize}`;
                }
                
                wheel.classList.remove('spin-wheel');
                saveUsersToCloud();
            }, 2000);
        }

        function createConfetti() {
            for (let i = 0; i < 50; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = Math.random() * 100 + 'vw';
                confetti.style.animationDelay = Math.random() * 5 + 's';
                confetti.style.background = `hsl(${Math.random() * 360}, 100%, 50%)`;
                document.body.appendChild(confetti);

                setTimeout(() => {
                    confetti.remove();
                }, 5000);
            }
        }

        // Daily Login Bonus
        function claimDailyBonus() {
            if (!currentUser) return;

            const today = new Date().toDateString();
            const lastBonusDate = localStorage.getItem(`lastBonus_${currentUser.email}`);

            if (lastBonusDate === today) {
                alert('You have already claimed your daily bonus today!');
                return;
            }

            const bonusAmount = Math.floor(Math.random() * 5) + 1; // ‚Çπ1 to ‚Çπ5
            currentUser.balance += bonusAmount;
            updateBalance();

            localStorage.setItem(`lastBonus_${currentUser.email}`, today);
            alert(`üéâ Daily bonus claimed! You received ‚Çπ${bonusAmount}`);
            saveUsersToCloud();
        }

        // Filter System
        function applyFilters() {
            const gameType = document.getElementById('gameTypeFilter').value;
            const entryFee = document.getElementById('entryFeeFilter').value;
            
            // Implement filter logic here
            alert(`Filters applied: Game Type - ${gameType}, Entry Fee - ${entryFee}`);
        }

        // Leaderboard Functions
        function loadLeaderboard() {
            const topPlayers = users.sort((a, b) => (b.totalWinnings || 0) - (a.totalWinnings || 0)).slice(0, 5);
            const topDepositors = users.sort((a, b) => (b.totalDeposits || 0) - (a.totalDeposits || 0)).slice(0, 5);
            const topReferrers = users.sort((a, b) => (b.referralEarnings || 0) - (a.referralEarnings || 0)).slice(0, 5);

            document.getElementById('topPlayers').innerHTML = topPlayers.map((user, index) => `
                <div class="flex justify-between items-center p-2 bg-white dark:bg-gray-600 rounded">
                    <span>${index + 1}. ${user.username}</span>
                    <span class="text-green-600 font-bold">‚Çπ${user.totalWinnings || 0}</span>
                </div>
            `).join('');

            document.getElementById('topDepositors').innerHTML = topDepositors.map((user, index) => `
                <div class="flex justify-between items-center p-2 bg-white dark:bg-gray-600 rounded">
                    <span>${index + 1}. ${user.username}</span>
                    <span class="text-blue-600 font-bold">‚Çπ${user.totalDeposits || 0}</span>
                </div>
            `).join('');

            document.getElementById('topReferrers').innerHTML = topReferrers.map((user, index) => `
                <div class="flex justify-between items-center p-2 bg-white dark:bg-gray-600 rounded">
                    <span>${index + 1}. ${user.username}</span>
                    <span class="text-purple-600 font-bold">‚Çπ${user.referralEarnings || 0}</span>
                </div>
            `).join('');
        }

        // FIXED REFERRAL SYSTEM - Only Code, No Link
        function generateReferralCode() {
            const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
            let code = '';
            for (let i = 0; i < 6; i++) {
                code += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            return code;
        }

        function loadReferralSection() {
            if (!currentUser) return;
            
            // Generate referral code if not exists
            if (!currentUser.referralCode) {
                currentUser.referralCode = generateReferralCode();
                saveUsersToCloud();
            }

            // Update referral UI - Only code, no link
            document.getElementById('referralCode').textContent = currentUser.referralCode;
            document.getElementById('referralCodeDisplay').textContent = currentUser.referralCode;
            
            // Calculate referral stats
            const referrals = users.filter(u => u.referredBy === currentUser.referralCode);
            const referralEarnings = referrals.reduce((sum, ref) => sum + (ref.referralBonus || 0), 0);
            const pendingCommission = referrals.reduce((sum, ref) => sum + (ref.pendingCommission || 0), 0);

            document.getElementById('totalReferrals').textContent = referrals.length;
            document.getElementById('referralEarnings').textContent = referralEarnings;
            document.getElementById('pendingCommission').textContent = pendingCommission;

            // Update referral list with commission details
            const referralList = document.getElementById('referralList');
            if (referrals.length > 0) {
                referralList.innerHTML = referrals.map(ref => {
                    const commissionHistory = ref.commissionHistory || [];
                    return `
                        <div class="p-4 bg-white dark:bg-gray-600 rounded-lg border">
                            <div class="flex justify-between items-center mb-2">
                                <div>
                                    <p class="font-bold dark:text-white">${ref.username}</p>
                                    <p class="text-sm text-gray-600 dark:text-gray-400">Joined: ${ref.joinDate}</p>
                                </div>
                                <div class="text-right">
                                    <p class="text-green-600 font-bold">+‚Çπ${ref.referralBonus || 0}</p>
                                    <p class="text-xs text-gray-600 dark:text-gray-400">Total Commission</p>
                                </div>
                            </div>
                            ${commissionHistory.length > 0 ? `
                                <div class="mt-2 pt-2 border-t border-gray-300 dark:border-gray-500">
                                    <p class="text-sm font-bold text-primary dark:text-white">Commission History:</p>
                                    ${commissionHistory.map(comm => `
                                        <p class="text-xs text-gray-600 dark:text-gray-400">‚Çπ${comm.amount} from ${comm.type} - ${comm.date}</p>
                                    `).join('')}
                                </div>
                            ` : ''}
                        </div>
                    `;
                }).join('');
            } else {
                referralList.innerHTML = '<p class="text-center text-gray-500 dark:text-gray-400">No referrals yet. Share your code to start earning!</p>';
            }
        }

        function copyReferralCode() {
            const code = document.getElementById('referralCodeDisplay').textContent;
            navigator.clipboard.writeText(code);
            alert('Referral code copied! Share this code with your friends.');
        }

        // Check for referral parameter in URL
        function checkReferral() {
            const urlParams = new URLSearchParams(window.location.search);
            const refCode = urlParams.get('ref');
            if (refCode) {
                localStorage.setItem('referralCode', refCode);
            }
        }

        // Enhanced WhatsApp messages with detailed info
        async function joinRoom(amount, mode) {
            if (!currentUser) { showLogin(); return; }
            if (currentUser.balance < amount) { alert('Insufficient balance!'); showSection('deposit'); return; }
            if (confirm(`Join ‚Çπ${amount} ${mode} room?`)) {
                currentUser.balance -= amount;
                const win = amount * 1.8;
                
                const msg = `üéÆ ROOM JOIN REQUEST üéÆ
üë§ User: ${currentUser.username}
üìß Email: ${currentUser.email}
üì± Phone: ${currentUser.phone}
üí∞ Room Entry: ‚Çπ${amount}
üéØ Game Mode: ${mode}
üèÜ Potential Win: ‚Çπ${win}
‚è∞ Timestamp: ${new Date().toLocaleString()}
üîó Platform: Free Fire & PUBG Tournament`;

                alert(`Joined ${mode} room! Win up to ‚Çπ${win}`);
                await updateBalance();
                window.open(`https://wa.me/12264939021?text=${encodeURIComponent(msg)}`, '_blank');
            }
        }

        // Ludo Room Join Function
        async function joinLudoRoom(ticket, win, travel) {
            if (!currentUser) { showLogin(); return; }
            if (currentUser.balance < ticket) { alert('Insufficient balance!'); showSection('deposit'); return; }
            if (confirm(`Join Travel ${travel} Ludo room? Ticket: ‚Çπ${ticket}, Win: ‚Çπ${win}`)) {
                currentUser.balance -= ticket;
                
                const msg = `üé≤ LUDO ROOM REQUEST üé≤
üë§ User: ${currentUser.username}
üìß Email: ${currentUser.email}
üì± Phone: ${currentUser.phone}
üé´ Travel: ${travel}
üí∞ Ticket: ‚Çπ${ticket}
üèÜ Potential Win: ‚Çπ${win}
‚è∞ Timestamp: ${new Date().toLocaleString()}
üîó Platform: Free Fire & PUBG Tournament`;

                alert(`Joined Travel ${travel} Ludo room! Win up to ‚Çπ${win}`);
                await updateBalance();
                window.open(`https://wa.me/12264939021?text=${encodeURIComponent(msg)}`, '_blank');
            }
        }

        async function joinErangel(amount) {
            if (!currentUser) { showLogin(); return; }
            if (currentUser.balance < amount) { alert('Insufficient balance!'); showSection('deposit'); return; }
            if (confirm(`Join Erangel ‚Çπ${amount} room? (‚Çπ${amount/2} per kill)`)) {
                currentUser.balance -= amount;
                
                const msg = `üéÆ ERANGEL ROOM REQUEST üéÆ
üë§ User: ${currentUser.username}
üìß Email: ${currentUser.email}
üì± Phone: ${currentUser.phone}
üí∞ Entry Fee: ‚Çπ${amount}
üéØ Mode: Erangel Classic
üî´ Per Kill: ‚Çπ${amount/2}
‚è∞ Timestamp: ${new Date().toLocaleString()}
üîó Platform: Free Fire & PUBG Tournament`;

                alert(`Joined Erangel! ‚Çπ${amount/2} per kill.`);
                await updateBalance();
                window.open(`https://wa.me/12264939021?text=${encodeURIComponent(msg)}`, '_blank');
            }
        }

        function sendDepositToWhatsApp() {
            const amt = document.getElementById('depositAmount').value;
            if (!amt || amt < 10) return alert('Enter amount ‚â• ‚Çπ10');
            
            const msg = `üí≥ DEPOSIT REQUEST üí≥
üë§ User: ${currentUser.username}
üìß Email: ${currentUser.email}
üì± Phone: ${currentUser.phone}
üí∞ Amount: ‚Çπ${amt}
üè¶ Payment Method: ${document.getElementById('currentUPI').textContent}
‚è∞ Timestamp: ${new Date().toLocaleString()}
üîó Platform: Free Fire & PUBG Tournament`;

            window.open(`https://wa.me/12264939021?text=${encodeURIComponent(msg)}`, '_blank');
        }

        // Your existing functions remain exactly the same
        function showSignup() { document.getElementById('signupModal').classList.remove('hidden'); }
        function showLogin() { document.getElementById('loginModal').classList.remove('hidden'); }
        function closeModals() { document.getElementById('signupModal').classList.add('hidden'); document.getElementById('loginModal').classList.add('hidden'); }
        function showAdminLogin() { document.getElementById('adminLoginModal').classList.remove('hidden'); }
        function closeAdminModal() { document.getElementById('adminLoginModal').classList.add('hidden'); }

        function handleAdminLogin(e) {
            e.preventDefault();
            const email = document.getElementById('adminEmail').value.trim().toLowerCase();
            const pass = document.getElementById('adminPass').value;
            if (email === 'admin@example.com' && pass === 'admin123') {
                isAdmin = true;
                localStorage.setItem('adminLoggedIn', 'true');
                closeAdminModal();
                showSection('admin');
                updateTotalUsers();
                loadAdminUsers();
                alert('Admin login successful!');
            } else {
                alert('Invalid admin credentials');
            }
        }

        async function handleSignup(e) {
            e.preventDefault();
            const name = document.getElementById('signupName').value.trim();
            const email = document.getElementById('signupEmail').value.trim().toLowerCase();
            const phone = document.getElementById('signupPhone').value;
            const pass = document.getElementById('signupPass').value;
            const referralCodeInput = document.getElementById('signupReferralCode').value.trim().toUpperCase();

            if (users.find(u => u.email === email)) return alert('Email already exists!');

            // Check for referral from URL or input field
            let referredBy = null;
            const urlReferralCode = localStorage.getItem('referralCode');
            
            if (urlReferralCode) {
                referredBy = urlReferralCode;
                localStorage.removeItem('referralCode');
            } else if (referralCodeInput) {
                referredBy = referralCodeInput;
            }

            const user = { 
                name, 
                email, 
                phone, 
                pass, 
                username: email.split('@')[0], 
                joinDate: new Date().toLocaleDateString('en-GB'), 
                balance: referredBy ? 5 : 0, // ‚Çπ5 bonus for referred users
                lastSeen: 'just now', 
                withdrawals: [],
                registeredAt: new Date().toISOString(),
                referredBy: referredBy,
                referralCode: null,
                referralEarnings: 0,
                totalReferrals: 0,
                totalDeposits: 0,
                totalWinnings: 0,
                totalWithdrawals: 0,
                commissionHistory: [],
                vipLevel: 0,
                vipActive: false,
                vipDuration: null,
                vipExpiry: null
            };
            users.push(user);
            
            // Add referral bonus to referrer
            if (referredBy) {
                const referrer = users.find(u => u.referralCode === referredBy);
                if (referrer) {
                    referrer.referralEarnings = (referrer.referralEarnings || 0) + 5;
                    referrer.totalReferrals = (referrer.totalReferrals || 0) + 1;
                    referrer.balance += 5;
                    
                    // Add to commission history
                    if (!referrer.commissionHistory) referrer.commissionHistory = [];
                    referrer.commissionHistory.push({
                        amount: 5,
                        date: new Date().toLocaleString(),
                        from: user.username,
                        type: 'Signup Bonus'
                    });
                    
                    alert(`üéâ You received ‚Çπ5 referral bonus!`);
                }
            }
            
            await saveUsersToCloud();
            localStorage.setItem('currentUser', JSON.stringify(user));
            loginSuccess(user);
        }

        // Auto commission on deposits
        function addReferralCommission(depositingUser, amount) {
            if (depositingUser.referredBy) {
                const referrer = users.find(u => u.referralCode === depositingUser.referredBy);
                if (referrer) {
                    const commission = amount * 0.02; // 2% commission
                    referrer.referralEarnings = (referrer.referralEarnings || 0) + commission;
                    referrer.balance += commission;
                    
                    // Add to commission history
                    if (!referrer.commissionHistory) referrer.commissionHistory = [];
                    referrer.commissionHistory.push({
                        amount: commission,
                        date: new Date().toLocaleString(),
                        from: depositingUser.username,
                        type: 'Deposit Commission'
                    });
                    
                    // Add transaction record
                    if (!referrer.transactionHistory) referrer.transactionHistory = [];
                    referrer.transactionHistory.unshift({
                        type: 'Referral Commission',
                        amount: commission,
                        date: new Date().toLocaleString(),
                        from: depositingUser.username
                    });
                    
                    saveUsersToCloud();
                    console.log(`‚Çπ${commission} referral commission added to ${referrer.username}`);
                }
            }
        }

        // Admin function to update user stats
        async function updateUserStats() {
            const email = document.getElementById('adminUserEmailStats').value.trim().toLowerCase();
            const winnings = parseFloat(document.getElementById('adminUserWinnings').value) || 0;
            const withdrawals = parseFloat(document.getElementById('adminUserWithdrawals').value) || 0;

            if (!email) return alert('Enter user email');

            const user = users.find(u => u.email.toLowerCase() === email);
            if (!user) return alert('User not found!');

            user.totalWinnings = winnings;
            user.totalWithdrawals = withdrawals;

            await saveUsersToCloud();
            alert(`Stats updated for ${user.username}\nWinnings: ‚Çπ${winnings}\nWithdrawals: ‚Çπ${withdrawals}`);
            
            // Clear fields
            document.getElementById('adminUserEmailStats').value = '';
            document.getElementById('adminUserWinnings').value = '';
            document.getElementById('adminUserWithdrawals').value = '';
        }

        // Admin function to update referral stats
        async function updateReferralStats() {
            const email = document.getElementById('adminUserEmailReferral').value.trim().toLowerCase();
            const referrals = parseInt(document.getElementById('adminUserReferrals').value) || 0;
            const referralEarnings = parseFloat(document.getElementById('adminUserReferralEarnings').value) || 0;

            if (!email) return alert('Enter user email');

            const user = users.find(u => u.email.toLowerCase() === email);
            if (!user) return alert('User not found!');

            user.totalReferrals = referrals;
            user.referralEarnings = referralEarnings;

            await saveUsersToCloud();
            alert(`Referral stats updated for ${user.username}\nTotal Referrals: ${referrals}\nReferral Earnings: ‚Çπ${referralEarnings}`);
            
            // Clear fields
            document.getElementById('adminUserEmailReferral').value = '';
            document.getElementById('adminUserReferrals').value = '';
            document.getElementById('adminUserReferralEarnings').value = '';
        }

        async function handleLogin(e) {
            e.preventDefault();
            const email = document.getElementById('loginEmail').value.trim().toLowerCase();
            const pass = document.getElementById('loginPass').value;

            const user = users.find(u => u.email === email && u.pass === pass);
            if (user) {
                user.lastSeen = 'just now';
                localStorage.setItem('currentUser', JSON.stringify(user));
                loginSuccess(user);
            } else {
                alert('Invalid email or password');
            }
        }

        function loginSuccess(user) {
            currentUser = user;
            closeModals();
            document.getElementById('landingPage').classList.add('hidden');
            document.getElementById('dashboard').classList.remove('hidden');
            document.getElementById('dashUsername').textContent = user.username;
            document.getElementById('welcomeUser').textContent = user.username;
            document.getElementById('joinDate').textContent = user.joinDate;
            document.getElementById('walletBalance').textContent = `‚Çπ${user.balance}`;
            updateLastSeen();
            
            // Update VIP status display
            updateVIPDisplay();
        }

        // Update VIP status display
        function updateVIPDisplay() {
            if (currentUser && currentUser.vipActive) {
                document.getElementById('profileVIP').textContent = `VIP ${currentUser.vipLevel}`;
                document.getElementById('vipBadge').innerHTML = '<i class="fas fa-check-circle"></i>';
                
                // Add VIP class to user info card
                const userCard = document.querySelector('.bg-gradient-to-r.from-primary.to-secondary');
                if (userCard) {
                    userCard.classList.add('vip-active');
                }
            } else {
                document.getElementById('profileVIP').textContent = 'None';
                document.getElementById('vipBadge').innerHTML = '';
            }
        }

        // Initialize cloud database
        async function initializeDatabase() {
            try {
                console.log('Loading data from cloud...');
                const response = await fetch(`https://api.jsonbin.io/v3/b/${JSONBIN_BIN_ID}/latest`, {
                    headers: {
                        'X-Master-Key': JSONBIN_API_KEY
                    }
                });
                
                if (response.ok) {
                    const data = await response.json();
                    users = data.record.users || [];
                    console.log('Cloud data loaded successfully:', users.length + ' users');
                } else {
                    console.log('Cloud load failed, using localStorage');
                    users = JSON.parse(localStorage.getItem('ludoUsers') || '[]');
                }
            } catch (error) {
                console.log('Cloud database not available, using localStorage');
                users = JSON.parse(localStorage.getItem('ludoUsers') || '[]');
            }
        }

        // Save users to cloud database
        async function saveUsersToCloud() {
            try {
                const response = await fetch(`https://api.jsonbin.io/v3/b/${JSONBIN_BIN_ID}`, {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json',
                        'X-Master-Key': JSONBIN_API_KEY
                    },
                    body: JSON.stringify({ users: users })
                });
                
                if (response.ok) {
                    console.log('Data saved to cloud successfully');
                    return true;
                } else {
                    throw new Error('Cloud save failed');
                }
            } catch (error) {
                console.log('Cloud save failed, using localStorage');
                localStorage.setItem('ludoUsers', JSON.stringify(users));
                return false;
            }
        }

        function updateBalance() {
            if (currentUser) {
                document.getElementById('walletBalance').textContent = `‚Çπ${currentUser.balance}`;
                localStorage.setItem('currentUser', JSON.stringify(currentUser));
                saveUsersToCloud();
            }
        }

        function updateLastSeen() {
            setInterval(() => {
                if (currentUser) document.getElementById('lastSeen').textContent = 'Last seen: just now';
            }, 30000);
        }

        function toggleMenu() { document.getElementById('menuDropdown').classList.toggle('hidden'); }

        function showSection(section) {
            document.querySelectorAll('#dashboard > div').forEach(div => div.classList.add('hidden'));
            document.getElementById(section + 'Section').classList.remove('hidden');
            
            if (section === 'admin' && isAdmin) { 
                updateTotalUsers(); 
                loadAdminUsers(); 
            }
            if (section === 'profile') {
                loadProfileData();
            }
            if (section === 'history') {
                loadHistoryData();
            }
            if (section === 'referral') {
                loadReferralSection();
            }
            if (section === 'leaderboard') {
                loadLeaderboard();
            }
            if (section === 'withdraw') toggleWithdrawFields();
            toggleMenu();
        }

        // Load Profile Data
        function loadProfileData() {
            if (currentUser) {
                document.getElementById('profileName').textContent = currentUser.name;
                document.getElementById('profileEmail').textContent = currentUser.email;
                document.getElementById('profilePhone').textContent = currentUser.phone;
                document.getElementById('profileUsername').textContent = currentUser.username;
                document.getElementById('profileJoinDate').textContent = currentUser.joinDate;
                document.getElementById('profileBalance').textContent = currentUser.balance;
                document.getElementById('profileGames').textContent = currentUser.gamesPlayed || 0;
                document.getElementById('profileWinnings').textContent = currentUser.totalWinnings || 0;
                document.getElementById('profileWithdrawals').textContent = currentUser.totalWithdrawals || 0;
                
                // Update VIP status
                updateVIPDisplay();
            }
        }

        // Load History Data
        function loadHistoryData() {
            const transactionHistory = document.getElementById('transactionHistory');
            const gameHistory = document.getElementById('gameHistory');
            const withdrawalHistory = document.getElementById('withdrawalHistory');
            
            if (currentUser) {
                // Transaction History
                if (currentUser.transactionHistory && currentUser.transactionHistory.length > 0) {
                    transactionHistory.innerHTML = currentUser.transactionHistory.map(transaction => 
                        `<div class="p-3 bg-white dark:bg-gray-600 rounded-lg border">
                            <p class="dark:text-white"><strong>${transaction.type}</strong> - ‚Çπ${transaction.amount}</p>
                            <p class="text-sm text-gray-600 dark:text-gray-400">${transaction.date}</p>
                        </div>`
                    ).join('');
                } else {
                    transactionHistory.innerHTML = '<p class="text-center text-gray-500 dark:text-gray-400">No transactions yet</p>';
                }

                // Game History
                if (currentUser.gamesPlayed > 0) {
                    gameHistory.innerHTML = `
                        <div class="p-3 bg-white dark:bg-gray-600 rounded-lg border">
                            <p class="dark:text-white"><strong>Total Games:</strong> ${currentUser.gamesPlayed}</p>
                            <p class="dark:text-white"><strong>Total Winnings:</strong> ‚Çπ${currentUser.totalWinnings || 0}</p>
                        </div>
                    `;
                } else {
                    gameHistory.innerHTML = '<p class="text-center text-gray-500 dark:text-gray-400">No games played yet</p>';
                }

                // Withdrawal History
                if (currentUser.withdrawals && currentUser.withdrawals.length > 0) {
                    withdrawalHistory.innerHTML = currentUser.withdrawals.map(withdrawal => 
                        `<div class="p-3 bg-white dark:bg-gray-600 rounded-lg border">
                            <p class="dark:text-white"><strong>Withdrawal:</strong> ‚Çπ${withdrawal.amount}</p>
                            <p class="text-sm text-gray-600 dark:text-gray-400">${withdrawal.date} - ${withdrawal.status || 'Pending'}</p>
                        </div>`
                    ).join('');
                } else {
                    withdrawalHistory.innerHTML = '<p class="text-center text-gray-500 dark:text-gray-400">No withdrawals yet</p>';
                }
            }
        }

        // Admin Panel Functions
        function updateTotalUsers() {
            document.getElementById('totalUsers').textContent = users.length;
        }

        function loadAdminUsers() {
            const container = document.getElementById('adminUserList');
            container.innerHTML = '';
            
            if (users.length === 0) {
                container.innerHTML = '<p class="text-center p-4 dark:text-white">No users registered yet</p>';
                return;
            }
            
            users.forEach(user => {
                const vipStatus = user.vipActive ? `VIP ${user.vipLevel} (${user.vipDuration})` : 'None';
                const div = document.createElement('div');
                div.className = 'p-4 border rounded-xl bg-gray-50 dark:bg-gray-700';
                div.innerHTML = `
                    <p class="dark:text-white"><strong>${user.username}</strong> (${user.email})</p>
                    <p class="dark:text-gray-300">Phone: ${user.phone} | Balance: ‚Çπ${user.balance}</p>
                    <p class="text-sm text-gray-600 dark:text-gray-400">Winnings: ‚Çπ${user.totalWinnings || 0} | Withdrawals: ‚Çπ${user.totalWithdrawals || 0}</p>
                    <p class="text-sm text-gray-600 dark:text-gray-400">Referrals: ${user.totalReferrals || 0} | Ref Earnings: ‚Çπ${user.referralEarnings || 0}</p>
                    <p class="text-sm text-gray-600 dark:text-gray-400">VIP: ${vipStatus} | Joined: ${user.joinDate}</p>
                    <div class="flex gap-2 mt-2">
                        <input type="number" placeholder="Amount" class="p-2 border rounded w-24 dark:bg-gray-600 dark:text-white" min="1">
                        <button onclick="addFund('${user.email}', this.previousElementSibling.value)" class="bg-green-500 text-white px-3 py-1 rounded text-sm">Add</button>
                        <button onclick="deductFund('${user.email}', this.parentElement.querySelector('input').value)" class="bg-red-500 text-white px-3 py-1 rounded text-sm">Deduct</button>
                    </div>
                `;
                container.appendChild(div);
            });
        }

        async function addFundToUser() {
            const email = document.getElementById('adminUserEmail').value.trim().toLowerCase();
            const amount = parseFloat(document.getElementById('adminFundAmount').value);
            if (!email || !amount) return alert('Enter email and amount');
            await addFund(email, amount);
        }

        async function deductFundFromUser() {
            const email = document.getElementById('adminUserEmailDeduct').value.trim().toLowerCase();
            const amount = parseFloat(document.getElementById('adminDeductAmount').value);
            if (!email || !amount) return alert('Enter email and amount');
            await deductFund(email, amount);
        }

        async function addFund(email, amountStr) {
            const amt = parseFloat(amountStr);
            if (isNaN(amt) || amt <= 0) return alert('Enter valid amount');
            const user = users.find(u => u.email.toLowerCase() === email.toLowerCase());
            if (!user) return alert('User not found! Check email spelling.');
            user.balance += amt;
            
            // Add referral commission if applicable
            addReferralCommission(user, amt);
            
            // Add transaction to user history
            if (!user.transactionHistory) user.transactionHistory = [];
            user.transactionHistory.unshift({
                type: 'Admin Added Funds',
                amount: amt,
                date: new Date().toLocaleString()
            });
            
            await saveUsersToCloud();
            alert(`‚Çπ${amt} added to ${user.username}. New balance: ‚Çπ${user.balance}`);
            loadAdminUsers();
            if (currentUser && currentUser.email.toLowerCase() === email.toLowerCase()) await updateBalance();
        }

        async function deductFund(email, amountStr) {
            const amt = parseFloat(amountStr);
            if (isNaN(amt) || amt <= 0) return alert('Enter valid amount');
            const user = users.find(u => u.email.toLowerCase() === email.toLowerCase());
            if (!user) return alert('User not found! Check email spelling.');
            if (user.balance < amt) return alert(`Insufficient balance. User has only ‚Çπ${user.balance}`);
            user.balance -= amt;
            
            // Add transaction to user history
            if (!user.transactionHistory) user.transactionHistory = [];
            user.transactionHistory.unshift({
                type: 'Admin Deducted Funds',
                amount: amt,
                date: new Date().toLocaleString()
            });
            
            await saveUsersToCloud();
            alert(`‚Çπ${amt} deducted from ${user.username}. New balance: ‚Çπ${user.balance}`);
            loadAdminUsers();
            if (currentUser && currentUser.email.toLowerCase() === email.toLowerCase()) await updateBalance();
        }

        // Withdraw Functions
        function toggleWithdrawFields() {
            const method = document.getElementById('withdrawMethod').value;
            document.getElementById('upiField').classList.toggle('hidden', method !== 'upi');
            document.getElementById('bankFields').classList.toggle('hidden', method !== 'bank');
        }

        function sendWithdrawToWhatsApp() {
            const amt = document.getElementById('withdrawAmount').value;
            if (!amt || amt < 100) return alert('Minimum ‚Çπ100');
            if (currentUser.balance < amt) return alert('Insufficient balance');
            const method = document.getElementById('withdrawMethod').value;
            let details = '';
            if (method === 'upi') {
                const upi = document.getElementById('upiId').value;
                if (!upi) return alert('Enter UPI ID');
                details = `UPI: ${upi}`;
            } else {
                const name = document.getElementById('accName').value;
                const acc = document.getElementById('accNumber').value;
                const ifsc = document.getElementById('ifsc').value;
                if (!name || !acc || !ifsc) return alert('Fill all bank details');
                details = `Name: ${name}\nAccount: ${acc}\nIFSC: ${ifsc}`;
            }
            const msg = `WITHDRAW REQUEST\nUser: ${currentUser.username}\nEmail: ${currentUser.email}\nAmount: ‚Çπ${amt}\n${details}`;
            window.open(`https://wa.me/12264939021?text=${encodeURIComponent(msg)}`, '_blank');
        }

        function logout() {
            localStorage.removeItem('currentUser');
            localStorage.removeItem('adminLoggedIn');
            isAdmin = false;
            location.reload();
        }

        // Initialize everything
        window.onload = async () => {
            await initializeDatabase();
            initializeLiveStats(); // Start live stats
            checkReferral(); // Check for referral codes
            
            // Load theme preference
            isDarkMode = localStorage.getItem('darkMode') === 'true';
            if (isDarkMode) {
                document.body.classList.add('dark-mode');
                document.querySelector('#themeToggle i').className = 'fas fa-sun';
            }

            // Load language preference
            currentLanguage = localStorage.getItem('language') || 'english';
            updateLanguage();

            const saved = localStorage.getItem('currentUser');
            if (saved) {
                const user = JSON.parse(saved);
                const found = users.find(u => u.email === user.email);
                if (found) loginSuccess(found);
            }
            if (localStorage.getItem('adminLoggedIn') === 'true') isAdmin = true;

            // Initialize wheel
            initializeWheel();
        };

        function initializeWheel() {
            const wheel = document.getElementById('wheel');
            if (!wheel) return;
            
            const segmentAngle = 360 / wheelPrizes.length;
            wheel.innerHTML = wheelPrizes.map((prize, index) => {
                const angle = index * segmentAngle;
                return `
                    <div class="absolute w-1/2 h-1/2 origin-bottom-right" style="transform: rotate(${angle}deg); transform-origin: bottom right;">
                        <div class="w-full h-full bg-${['red', 'blue', 'green', 'yellow', 'purple', 'pink', 'indigo', 'teal', 'orange', 'cyan'][index]}-500 transform origin-bottom-left rotate(${segmentAngle}deg) flex items-center justify-center">
                            <span class="text-white text-xs font-bold transform -rotate-${segmentAngle * 1.5}">${prize}</span>
                        </div>
                    </div>
                `;
            }).join('');
        }

        document.addEventListener('click', (e) => {
            if (!e.target.closest('nav')) document.getElementById('menuDropdown').classList.add('hidden');
        });

        // Event listeners for theme and language toggles
        document.getElementById('themeToggle').addEventListener('click', toggleTheme);
        document.getElementById('languageToggle').addEventListener('click', toggleLanguage);
    </script>
</body>
</html>
